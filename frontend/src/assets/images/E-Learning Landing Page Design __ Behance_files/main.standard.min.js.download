!function(){"use strict";var e=window,n=document,t=Object.defineProperty,r="replace",o=function(e){return e=e[r](/%2523access_token%253D.*?%2526/gim,"%2526")[r](/%23access_token%3D.*?%26/gim,"%26")[r](/#access_token=.*?&/gim,"&")[r](/information=[^\&]+/,"")[r](/puser=[^\&]+/,"")[r](/fnuser=[^\&]+/,"")[r](/lnuser=[^\&]+/,"")};function i(){try{var e="referrer",r=n[e],i=o(r);i!==r&&t(n,e,{configurable:!0,value:i})}catch(e){}}var a=n.head,c=e.marketingtech,u=decodeURIComponent;function s(e){var t,r,o,i;for(r=0,o=(t=n.cookie?n.cookie.split("; "):[]).length;r<o;r++)if(i=t[r],u(i.substr(0,i.indexOf("=")))===e)return u(i.substr(i.indexOf("=")+1))}function d(){var t,r,o,i="alloy-prehiding",u="@keyframes alloyShow{from {opacity: 0.01;} to {opacity: 1;}}body,.personalization-container{opacity:0.01 !important;animation: 0s 3s forwards alloyShow}",d=3e3;if(n.getElementById("feds-script")&&(i="manual-prehiding"),r=n.getElementById(i),o=function(e){try{e&&e.parentNode&&e.parentNode.removeChild(e)}catch(e){}},!(a&&c&&c.adobe&&c.adobe.target)||e.targetGlobalSettings&&!e.targetGlobalSettings.bodyHidingEnabled||-1!==e.location.href.indexOf("mboxEdit")||-1!==e.location.search.indexOf("mboxDisable=1")||-1!==e.location.search.indexOf("adobe_authoring_enabled")||-1!==n.cookie.indexOf("adobe_optout")||s("OptanonChoice")&&(t=s("OptanonConsent"))&&-1!==t.indexOf("C0002:0"))o(r);else{if(!r){(r=n.createElement("style")).id=i,r.innerHTML=u;try{a.appendChild(r)}catch(e){}}setTimeout((function(){o(r)}),d)}}function l(){return e.alloy_events=e.alloy_events||[]}var f=function(e,n){for(var t=n.split("."),r=e,o=0,i=t.length-1;o<i;o++){var a=t[o];if(!r[a])return;r=r[a]}return r[t[o]]},p=function(e,n,t){for(var r=n.split("."),o=e,i=0,a=r.length-1;i<a;i++){var c=r[i];o[c]=o[c]||{},o=o[c]}return o[r[i]]=t,e};function g(){var n=e.alloy_all=e.alloy_all||{};return n.promises=n.promises||[],n.xdm=n.xdm||{},n.data=n.data||{},n.get=function(e){return f(n,e)},n.set=function(e,t){return p(n,e,t)},n}var m=Promise;function v(){var n=e.alloy_load=e.alloy_load||{};return n.i=!1,n.sent=new m((function(e,t){n.r=e,n.j=t})),n.promises=n.promises||[],n.xdm=n.xdm||{},n.data=n.data||{},n.get=function(e){return f(n,e)},n.set=function(e,t){return p(n,e,t)},n}function h(){var n=e.alloy_unload=e.alloy_unload||{};return n.i=!1,n.sent=new m((function(e,t){n.r=e,n.j=t})),n.xdm=n.xdm||{},n.data=n.data||{},n.get=function(e){return f(n,e)},n.set=function(e,t){return p(n,e,t)},n}function y(){l(),g(),v(),h()}var b=encodeURIComponent,w=e.location;function E(n,t,r){e.addEventListener(n,t,r)}const C=["acrobat.com","adobe.com","adobe.io","magento.com","marketo.com"];var I=function(e,n){var t,r,o="object";if(e&&typeof e===o&&n&&typeof n===o)for(t in n)Object.prototype.hasOwnProperty.call(n,t)&&(r=n[t],Array.isArray(r)?(e[t]=e[t]||[],Array.isArray(e[t])&&(e[t]=e[t].concat(r))):r&&typeof r===o?(e[t]=e[t]||{},I(e[t],r)):e[t]=r);return e};const k=function(e){var n,t,r;for(r=0;r<15&&(n=JSON.stringify(e,(function(e,n){return n&&"object"==typeof n&&!Array.isArray(n)&&Object.keys(n).length<1?void 0:n})),e=JSON.parse(n),n!==t);r++)t=n;return e};function S(){var n,t,r,o,i,a,c,u,d,f,p=new URLSearchParams(w.search),v=g(),h=l(),y="alloy",S="debugSessionId",T="prod",D="adobePrivacy:Privacy";(e.__alloyNS=e.__alloyNS||[]).push(y),n=function(){var e=arguments;return new m((function(t,r){n.q.push([t,r,e])}))},n.q=[],e[y]=n,t=function(e){var n,t,r,o,i,a={},c={};if(I(c,v.xdm),I(c,e.xdm),I(a,c),I(a,v.data),I(a,e.data),I(c.web,a.web),delete a.device,delete a.environment,delete a.implementationDetails,delete a.placeContext,delete a.timestamp,delete a.productListItems,e.data=k(a),e.xdm=k(c),(n=e.data)&&(t=n.web)&&(r=t.webInteraction)&&(o=r.type)&&"exit"===o&&(o=r.URL)&&(o=new URL(o))&&(i=o.hostname)&&C.some((function(e){return-1!==i.indexOf(e)})))return!1;(n=e.data)&&(t=n.web)&&(r=t.webInteraction)&&(o=r.type)&&("exit"===o||"download"===o)&&(o=r.URL)&&(r.name=o),a._i&&(n=h[a._i])&&(n.data=e.data,n.xdm=e.xdm)},r=function(e){var n,t,r,o;if((n=e.xdm)&&(t=n.web)&&(r=t.webInteraction)&&(o=r.type)&&"exit"!=o&&"download"!=o)return!1},(["localhost","stage","staging","dev","development","qa","test","testing","author"].some((function(e){return-1!==w.hostname.indexOf(e)}))||e.marketingtech&&e.marketingtech.adobe&&e.marketingtech.adobe.launch&&-1!==e.marketingtech.adobe.launch.url.indexOf("development"))&&(T="stage"),d=e.marketingtech&&e.marketingtech.adobe&&e.marketingtech.adobe.alloy,f=d.edgeConfigId?d.edgeConfigId:"prod"===T?"913eac4d-900b-45e8-9ee7-306216765cd2":"e065836d-be57-47ef-b8d1-999e1657e8fd",e._satellite=e._satellite||{},e._satellite.alloyConfigurePromise=m.resolve().then((function(){return n("configure",{edgeConfigId:f+(p.has(S)?"&"+S+"="+b(p.get(S)):""),orgId:"9E1005A551ED61CA0A490D45@AdobeOrg",edgeDomain:d?.edgeDomain||"sstats.adobe.com",edgeBasePath:d?.edgeBasePath||"ee",defaultConsent:"in",idMigrationEnabled:!0,thirdPartyCookiesEnabled:!1,context:["web","device","environment","placeContext","highEntropyUserAgentHints"],clickCollectionEnabled:d?.clickCollectionEnabled??!0,clickCollection:{internalLinkEnabled:d?.clickCollection?.internalLinkEnabled??!0,downloadLinkEnabled:d?.clickCollection?.downloadLinkEnabled??!0,externalLinkEnabled:d?.clickCollection?.externalLinkEnabled??!0},onBeforeEventSend:t,onBeforeLinkClickSend:r,targetMigrationEnabled:!0})})),e.alloy_getIdentity=new m((function(t){let r=function(){e.removeEventListener("alloy_sendEvent",r),n("getIdentity").then(t)};e.addEventListener("alloy_sendEvent",r)}));let P=function(){var e=s("OptanonConsent");return e&&(e=e.split("groups="))&&e[1]&&(e=e[1].split("&"))&&(e=e[0].replace(/:1,/g,"|").replace(/:1/g,""))||""};e.alloy_all.set("data._adobe_corpnew.digitalData.adobe.activePrivacyGroups",P()),(u=s("kndctr_9E1005A551ED61CA0A490D45_AdobeOrg_consent"))&&(u=u.split(";").reduce((function(e,n){return e[(n=n.split("="))[0]]=n[1],e}),{}))&&"out"===u.general||(u=u||{},E(D+"Consent",o=function(){c=(i=e.adobePrivacy)&&i.activeCookieGroups&&(a=i.activeCookieGroups())&&-1!==a.indexOf("C0002"),u.general&&"pending"!==u.general&&("in"!==u.general||c)||(u.general=c?"in":"out",n("setConsent",{consent:[{standard:"Adobe",version:"2.0",value:{collect:{val:c?"y":"n"},metadata:{time:(new Date).toISOString()}}}]}))}),E(D+"Reject",o),E(D+"Custom",o))}function T(){if(document.documentMode&&document.documentMode<11)console.warn("The Adobe Experience Cloud Web SDK does not support IE 10 and below.");else{var e=function(e){return function(n){var t=n[0],r=n[1],o=n[2],i=o[0],a=o[1];e(i,a).then(t,r)}},n="Chrome",t="Edge",r="EdgeChromium",o="Firefox",i="IE",a="Safari",c="Unknown",u=function(e,n){return-1!==e.indexOf(n)},s=[n,t,r,i,c],d=function(e){return u(s,e)},l="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},f=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,m=Of()?Object.assign:function(e,n){for(var t,r,o=Pf(e),i=1;i<arguments.length;i++){for(var a in t=Object(arguments[i]))p.call(t,a)&&(o[a]=t[a]);if(f){r=f(t);for(var c=0;c<r.length;c++)g.call(t,r[c])&&(o[r[c]]=t[r[c]])}}return o},v=Tf(m),h=function(e){return null==e},y=function(e){return!h(e)&&!Array.isArray(e)&&"object"===Jf(e)},b=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.length<2?v.apply(void 0,n):n.reduce((function(e,n){return y(n)&&Object.keys(n).forEach((function(t){var r;Array.isArray(n[t])?Array.isArray(e[t])?(r=e[t]).push.apply(r,Vf(n[t])):e[t]=Vf(n[t]):e[t]=n[t]})),e}))},w=Yf({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"}),E={get:w.get,set:w.set,remove:w.remove,withConverter:w.withConverter},C=function e(n,t){Object.keys(t).forEach((function(r){y(n[r])&&y(t[r])?e(n[r],t[r]):n[r]=t[r]}))},I=function(e){if(h(e))throw new TypeError('deepAssign "target" cannot be null or undefined');for(var n=Object(e),t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return r.forEach((function(e){return C(n,Object(e))})),n},k=function(e,n){return function(t){var r=n.split(".").reduce((function(e,n){return e[n]=e[n]||{},e[n]}),e);I(r,t)}},S=function(){var e=[];return{add:function(n){e.push(n)},call:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return Promise.all(e.map((function(e){return e.apply(void 0,t)})))}}},T=function(e){var n=e.logger,t=e.cookieJar;return Uf(Uf({},t),{},{set:function(e,r,o){n.info("Setting cookie",Uf({name:e,value:r},o)),t.set(e,r,o)}})},D=function(){var e=0,n=Promise.resolve();return{addTask:function(t){e+=1;var r=function(){return t().finally((function(){e-=1}))};return n=n.then(r,r)},get length(){return e}}},P=function(){for(var e=[],n=0;n<256;n++){for(var t=n,r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e.push(t)}return function(n,t){n=unescape(encodeURIComponent(n)),t||(t=0),t^=-1;for(var r=0;r<n.length;r++){var o=255&(t^n.charCodeAt(r));t=t>>>8^e[o]}return(t^=-1)>>>0}}(),O=function(){var e={};return e.promise=new Promise((function(n,t){e.resolve=n,e.reject=t})),e},R=function(e,n){return e===n},A=function(e,n,t){for(var r=0;r<e.length;r+=1)if(t(e[r],n))return r;return-1},N=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:R;return e.filter((function(t,r){return A(e,t,n)===r}))},x=function(e,n){return e.substr(-n.length)===n},M=function(e,n){for(var t=0;t<e.length;t+=1){var r=e[t];if(n(r,t,e))return r}},_=function(e,n){return e.appendChild(n)},q=function(e,n){Object.keys(n).forEach((function(t){if("style"===t&&y(n[t])){var r=n[t];Object.keys(r).forEach((function(n){e.style[n]=r[n]}))}else e[t]=n[t]}))},L=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=(arguments.length>4&&void 0!==arguments[4]?arguments[4]:document).createElement(e);return Object.keys(n).forEach((function(e){o.setAttribute(e,n[e])})),q(o,t),r.forEach((function(e){return _(o,e)})),o},j="BODY",U="IFRAME",F="IMG",B="DIV",H="STYLE",V="SCRIPT",z="HEAD",G=function(e){var n=e.src,t=e.currentDocument,r=void 0===t?document:t;return new Promise((function(e,t){L(F,{src:n},{onload:e,onerror:t,onabort:t},[],r)}))},J=function(e){return"function"==typeof e},Q=function(e){return Array.isArray(e)&&e.length>0},X=function(e){return Array.isArray(e)?e:null==e?[]:[].slice.call(e)},Y=/^\s*>/,K=function(e,n){if(!Y.test(n))return X(e.querySelectorAll(n));var t="alloy-"+Date.now();try{return e.classList.add(t),X(e.querySelectorAll("."+t+" "+n))}finally{e.classList.remove(t)}},W=function(e,n){return e.substr(0,n.length)===n},$=":shadow",Z=function(e){return e.split($)},ee=function(e,n){var t=n;return W(t,">")?window.document.documentMode?t.substring(1).trim():(e instanceof Element||e instanceof HTMLDocument?":scope":":host")+" "+t:t},ne=function(e,n){if(!window.document.documentElement.attachShadow)return K(e,n.replace($,""));var t=Z(n);if(t.length<2)return K(e,n);for(var r=e,o=0;o<t.length;o+=1){var i=t[o].trim();if(""===i&&r.shadowRoot)r=r.shadowRoot;else{var a=ee(r,i),c=K(r,a);if(0===c.length||!c[0]||!c[0].shadowRoot)return c;r=c[0].shadowRoot}}},te=function(e){return-1!==e.indexOf($)},re=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return te(e)?ne(n,e):K(n,e)},oe="MutationObserver",ie="requestAnimationFrame",ae={childList:!0,subtree:!0},ce="visibilityState",ue="visible",se=100,de=5e3,le=function(e){return new Error("Could not find: "+e)},fe=function(e){return new Promise(e)},pe=function(e){return J(e[oe])},ge=function(e,n,t,r,o){return fe((function(i,a){var c,u=new e[oe]((function(){var e=o(t);Q(e)&&(u.disconnect(),c&&clearTimeout(c),i(e))}));c=setTimeout((function(){u.disconnect(),a(le(t))}),r),u.observe(n,ae)}))},me=function(e){return e[ce]===ue},ve=function(e,n,t,r){return fe((function(o,i){(function t(){var i=r(n);Q(i)?o(i):e[ie](t)})(),setTimeout((function(){i(le(n))}),t)}))},he=function(e,n,t){return fe((function(r,o){(function n(){var o=t(e);Q(o)?r(o):setTimeout(n,se)})(),setTimeout((function(){o(le(e))}),n)}))},ye=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:re,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:de,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:document,i=n(e);return Q(i)?Promise.resolve(i):pe(r)?ge(r,o,e,t,n):me(o)?ve(r,e,t,n):he(e,t,n)},be=function(e,n){return n.matches?n.matches(e):n.msMatchesSelector(e)},we=function(e){var n=e.parentNode;return n?n.removeChild(e):null},Ee={name:"Adobe Alloy"},Ce={style:{display:"none",width:0,height:0}},Ie=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.appendNode,r=void 0===t?_:t,o=n.awaitSelector,i=void 0===o?ye:o,a=n.createNode,c=void 0===a?L:a,u=n.fireImage,s=void 0===u?G:u,d=s,l=function(){return i(j).then((function(n){var t=Hf(n,1)[0];return e||(e=c(U,Ee,Ce),r(t,e))}))},f=function(e){var n=e.src;return l().then((function(e){var t=e.contentWindow.document;return s({src:n,currentDocument:t})}))};return function(e){var n=e.hideReferrer,t=e.url;return n?f({src:t}):d({src:t})}},ke=function(e){return y(e)&&0===Object.keys(e).length},Se=function e(n,t){return h(n)||!y(n)?n:Object.keys(n).reduce((function(r,o){var i=n[o];if(y(i)){var a=e(i,t);return ke(a)?r:Uf(Uf({},r),{},xf({},o,a))}return t(i)?Uf(Uf({},r),{},xf({},o,i)):r}),{})},Te=function(e,n){return Array.prototype.concat.apply([],e.map(n))},De="com.adobe.alloy.",Pe=function(e,n){return e.slice(-n)},Oe=De+"getTld",Re=function(e,n){for(var t="",r=e.location.hostname.toLowerCase().split("."),o=1;o<r.length&&!n.get(Oe);)t=Pe(r,o+=1).join("."),n.set(Oe,Oe,{domain:t});return n.remove(Oe,{domain:t}),t},Ae="kndctr",Ne=function(e){return e.replace("@","_")},xe=function(e,n){return Ae+"_"+Ne(e)+"_"+n},Me=function(e,n){var t={};return e.forEach((function(e){var r=n(e);t[r]||(t[r]=[]),t[r].push(e)})),t},_e="identity",qe="consent",Le="cluster",je=function(e){var n=e.orgId,t=xe(n,_e);return function(){return Boolean(E.get(t))}},Ue=function(e,n,t){return{getItem:function(r){try{return e[n].getItem(t+r)}catch(e){return null}},setItem:function(r,o){try{return e[n].setItem(t+r,o),!0}catch(e){return!1}},clear:function(){try{return Object.keys(e[n]).forEach((function(r){W(r,t)&&e[n].removeItem(r)})),!0}catch(e){return!1}}}},Fe=function(e){return function(n){var t=De+n;return{session:Ue(e,"sessionStorage",t),persistent:Ue(e,"localStorage",t)}}},Be=function(e,n){return e.filter((function(e){return u(n,e)}))},He=function(e){return"boolean"==typeof e},Ve=function(e){return"number"==typeof e&&!isNaN(e)},ze=function(e){var n=parseInt(e,10);return Ve(n)&&e===n},Ge=function(e,n){return 0===n.indexOf(Ae+"_"+Ne(e)+"_")},Je=function(e){return"string"==typeof e},Qe=function(e){return Je(e)&&e.length>0},Xe=function(e,n){var t=new Map;return function(){var n=arguments.length<=0?void 0:arguments[0];if(t.has(n))return t.get(n);var r=e.apply(void 0,arguments);return t.set(n,r),r}},Ye=function(){},Ke=function(e,n,t){var r=String(e),o=String(t);if(r.length>=n||0===o.length)return r;for(var i=n-r.length;i>o.length;)o+=o;return o.slice(0,i)+r},We=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){for(var t={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\d*))?))?((((?:[^?#/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@/]*@)([^:/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#/]*\.[^?#/.]+(?:[?#]|$)))*\/?)?([^?#/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=t.parser[n.strictMode?"strict":"loose"].exec(e),o={},i=14;i--;)o[t.key[i]]=r[i]||"";return o[t.q.name]={},o[t.key[12]].replace(t.q.parser,(function(e,n,r){n&&(o[t.q.name][n]=r)})),o}},$e=Tf(We),Ze=function(e){var n={},t=e.split(".");switch(t.length){case 1:n.subdomain="",n.domain=e,n.topLevelDomain="";break;case 2:n.subdomain="",n.domain=e,n.topLevelDomain=t[1];break;case 3:n.subdomain="www"===t[0]?"":t[0],n.domain=e,n.topLevelDomain=t[2];break;case 4:n.subdomain="www"===t[0]?"":t[0],n.domain=e,n.topLevelDomain=t[2]+"."+t[3]}return n},en=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ze;Je(e)||(e="");var t=$e(e)||{},r=t.host,o=void 0===r?"":r,i=t.path,a=void 0===i?"":i,c=t.query,u=void 0===c?"":c,s=t.anchor;return Uf({path:a,query:u,fragment:void 0===s?"":s},n(o))},nn=function(e){if(h(e)||"object"!==Jf(e))return null;var n=Se(e,(function(e){return!h(e)&&(!!He(e)||(!!Ve(e)||(!!Qe(e)||!!Q(e))))}));return ke(n)?null:n},tn={},rn=function(e,n,t,r){n=n||"&",t=t||"=";var o={};if("string"!=typeof e||0===e.length)return o;var i=/\+/g;e=e.split(n);var a=1e3;r&&"number"==typeof r.maxKeys&&(a=r.maxKeys);var c=e.length;a>0&&c>a&&(c=a);for(var u=0;u<c;++u){var s,d,l,f,p=e[u].replace(i,"%20"),g=p.indexOf(t);g>=0?(s=p.substr(0,g),d=p.substr(g+1)):(s=p,d=""),l=decodeURIComponent(s),f=decodeURIComponent(d),Kf(o,l)?Array.isArray(o[l])?o[l].push(f):o[l]=[o[l],f]:o[l]=f}return o},on=function(e){switch(Jf(e)){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},an=function(e,n,t,r){return n=n||"&",t=t||"=",null===e&&(e=void 0),"object"===Jf(e)?Object.keys(e).map((function(r){var o=encodeURIComponent(on(r))+t;return Array.isArray(e[r])?e[r].map((function(e){return o+encodeURIComponent(on(e))})).join(n):o+encodeURIComponent(on(e[r]))})).join(n):r?encodeURIComponent(on(r))+t+encodeURIComponent(on(e)):""};tn.decode=tn.parse=rn,tn.encode=tn.stringify=an;for(var cn,un=tn,sn={parse:function(e){return"string"==typeof e&&(e=e.trim().replace(/^[?#&]/,"")),un.parse(e)},stringify:function(e){return un.stringify(e)}},dn=Tf(sn),ln=function(e){return e instanceof Error?e:new Error(e)},fn=function(e){var n=e.error,t=e.message;try{n.message=t}catch(e){}},pn=function(e){var n=e.error,t=e.message,r=ln(n),o=t+"\nCaused by: "+r.message;return fn({error:r,message:o}),r},gn=function(e){return Je(e)&&"true"===e.toLowerCase()},mn=function(e,n){if(Ve(e)||Je(e)){var t=Math.round(Number(e));if(!isNaN(t))return t}return n},vn=function(e){var n=e.getFullYear(),t=Ke(e.getMonth()+1,2,"0"),r=Ke(e.getDate(),2,"0"),o=Ke(e.getHours(),2,"0"),i=Ke(e.getMinutes(),2,"0"),a=Ke(e.getSeconds(),2,"0"),c=Ke(e.getMilliseconds(),3,"0"),u=mn(e.getTimezoneOffset(),0);return n+"-"+t+"-"+r+"T"+o+":"+i+":"+a+"."+c+(u>0?"-":"+")+Ke(Math.floor(Math.abs(u)/60),2,"0")+":"+Ke(Math.abs(u)%60,2,"0")},hn=[],yn=0;yn<256;++yn)hn.push((yn+256).toString(16).slice(1));var bn=new Uint8Array(16),wn={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},En=function(e){return function(n,t){return null==n?n:e.call(this,n,t)}},Cn=function(e,n){return function(t,r){return n.call(this,e.call(this,t,r),r)}},In=function(e,n){return function(t,r){var o=this,i=[],a=[e,n].reduce((function(e,n){try{return n.call(o,e,r)}catch(n){return i.push(n),e}}),t);if(i.length)throw new Error(i.join("\n"));return a}},kn=function(e,n,t){return v(Cn(e,n),e,t)},Sn=function(e,n,t){return v(Cn(e,En(n)),e,t)},Tn=function(e,n,t){return v(In(En(n),e),e,t)},Dn=function(e,n,t,r){if(!e)throw new Error("'"+t+"': Expected "+r+", but got "+JSON.stringify(n)+".")},Pn=function(e,n){return Dn(He(e),e,n,"true or false"),e},On=function(e,n){return Dn(J(e),e,n,"a function"),e},Rn=function(e,n){return function(t,r){var o,i=this,a=M(e,(function(e){try{return o=e.call(i,t,r),!0}catch(e){return!1}}));return Dn(a,t,r,n),o}},An=function(e){return function(n,t){var r=this;Dn(Array.isArray(n),n,t,"an array");var o=[],i=n.map((function(i,a){try{return e.call(r,i,t+"["+a+"]",n)}catch(e){return void o.push(e.message)}}));if(o.length)throw new Error(o.join("\n"));return i}},Nn=function(e){return function(n){return null==n?e:n}},xn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"This field has been deprecated";return function(n,t){var r=e;return void 0!==n&&(t&&(r="'"+t+"': "+r),this&&this.logger&&this.logger.warn(r)),n}},Mn=function(e){return function(n,t){return Dn(n===e,n,t,""+e),n}},_n=function(e){return function(n,t){var r=this;Dn(y(n),n,t,"an object");var o=[],i={};if(Object.keys(n).forEach((function(a){var c=n[a],u=t?t+"."+a:a;try{var s=e.call(r,c,u);void 0!==s&&(i[a]=s)}catch(e){o.push(e.message)}})),o.length)throw new Error(o.join("\n"));return i}},qn=function(e,n){return function(t,r){return Dn(t>=n,t,r,e+" greater than or equal to "+n),t}},Ln=function(e,n){return function(t,r){return Dn(t<=n,t,r,e+" less than or equal to "+n),t}},jn=function(e){return function(n,t){var r=[];if(Object.keys(n).forEach((function(n){if(!e[n]){var o=t?t+"."+n:n;r.push("'"+o+"': Unknown field.")}})),r.length)throw new Error(r.join("\n"));return n}},Un=function(e){return function(n,t){return y(n)?Dn(!ke(n),n,t,e):Dn(n.length>0,n,t,e),n}},Fn=function(e){return function(n,t){var r=this;Dn(y(n),n,t,"an object");var o=[],i={};if(Object.keys(e).forEach((function(a){var c=n[a],u=e[a],s=t?t+"."+a:a;try{var d=u.call(r,c,s);void 0!==d&&(i[a]=d)}catch(e){o.push(e.message)}})),Object.keys(n).forEach((function(e){Object.prototype.hasOwnProperty.call(i,e)||(i[e]=n[e])})),o.length)throw new Error(o.join("\n"));return i}},Bn=function(e,n,t){return function(r,o){Dn(y(r),r,o,"an object");var i=r[e],a=r[t],c=Ff(r,[e,t].map(Gf)),u=n(i,o);if(void 0!==u){var s="The field '"+e+"' is deprecated. Use '"+t+"' instead.";if(o&&(s="'"+o+"': "+s),void 0!==a&&a!==u)throw new Error(s);this&&this.logger&&this.logger.warn(s)}return Uf(xf({},t,a||u),c)}},Hn=function(){var e=[];return function(n,t){return Dn(-1===e.indexOf(n),n,t,"a unique value across instances"),e.push(n),n}},Vn=function(e){for(var n=Object.create(null),t=0;t<e.length;t+=1){var r=e[t];if(r in n)return!1;n[r]=!0}return!0},zn=function(){return function(e,n){Dn(Vn(e),e,n,"array values to be unique")}},Gn=/^[a-z0-9.-]{1,}$/i,Jn=function(e,n){return Dn(Gn.test(e),e,n,"a valid domain"),e},Qn=function(e,n){return Dn(ze(e),e,n,"an integer"),e},Xn=function(e,n){return Dn(Ve(e),e,n,"a number"),e},Yn=function(e){try{return null!==RegExp(e)}catch(e){return!1}},Kn=function(e,n){return Dn(Yn(e),e,n,"a regular expression"),e},Wn=function(e,n){if(null==e)throw new Error("'"+n+"' is a required option");return e},$n=function(e,n){return Dn(Je(e),e,n,"a string"),e},Zn=function(e){return function(n,t){return Dn(e.test(n),n,t,"does not match the "+e.toString()),n}},et=function(e){return e};et.default=function(e){return kn(this,Nn(e))},et.required=function(){return kn(this,Wn)},et.deprecated=function(e){return kn(this,xn(e))};var nt=function(){return Sn(this,Jn)},tt=function(e){return Sn(this,qn("an integer",e))},rt=function(e){return Sn(this,qn("a number",e))},ot=function(e){return Sn(this,Ln("a number",e))},it=function(){return Sn(this,Qn,{minimum:tt})},at=function(){return Sn(this,Un("a non-empty string"))},ct=function(){return Sn(this,Un("a non-empty array"))},ut=function(){return Sn(this,Un("a non-empty object"))},st=function(){return Sn(this,Kn)},dt=function(e){return Sn(this,Zn(e))},lt=function(){return Sn(this,Hn())},ft=function(){return Sn(this,zn())},pt=function(){return this},gt=function(e){return Sn(this,An(e),{nonEmpty:ct,uniqueItems:ft})},mt=function(){return Sn(this,Pn)},vt=function(){return Sn(this,On)},ht=function(e){return Sn(this,Mn(e))},yt=function(){return Sn(this,Xn,{minimum:rt,maximum:ot,integer:it,unique:lt})},bt=function(e){return Sn(this,_n(e),{nonEmpty:ut})},wt=function e(n){return{noUnknownFields:function(){return Sn(this,jn(n))},nonEmpty:ut,concat:function(t){var r=Uf(Uf({},n),t.schema);return Sn(this,t,e(r))},renamed:function(e,n,t){return Tn(this,Bn(e,n,t))},schema:n}},Et=function(e){return Sn(this,Fn(e),wt(e))},Ct=function(){return Sn(this,$n,{regexp:st,domain:nt,nonEmpty:at,unique:lt,matches:dt})},It=function(e,n){return kn(this,Rn(e,n))}.bind(et),kt=pt.bind(et),St=gt.bind(et),Tt=mt.bind(et),Dt=vt.bind(et),Pt=ht.bind(et),Ot=yt.bind(et),Rt=bt.bind(et),At=Et.bind(et),Nt=Ct.bind(et),xt=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return It(n.map(Pt),"one of these values: ["+JSON.stringify(n)+"]")},Mt=Rt(St(At({authenticatedState:xt("ambiguous","authenticated","loggedOut"),id:Nt(),namespace:At({code:Nt()}).noUnknownFields(),primary:Tt(),xid:Nt()}).noUnknownFields()).required()),_t=At({}),qt=function(e){return Object.keys(e).map((function(n){return e[n]}))},Lt="alloy_debug",jt=function(e){var n=e.console,t=e.locationSearch,r=e.createLogger,o=e.instanceName,i=e.createNamespacedStorage,a=e.getMonitors,c=dn.parse(t),u=i("instance."+o+"."),s=u.session.getItem("debug"),d="true"===s,l=null===s,f=function(){return d},p=function(e,n){var t=n.fromConfig;t&&!l||(d=e),t||(u.session.setItem("debug",e.toString()),l=!1)};return void 0!==c[Lt]&&p(gn(c[Lt]),{fromConfig:!1}),{setDebugEnabled:p,logger:r({getDebugEnabled:f,context:{instanceName:o},getMonitors:a,console:n}),createComponentLogger:function(e){return r({getDebugEnabled:f,context:{instanceName:o,componentName:e},getMonitors:a,console:n})}}},Ut=["onComponentsRegistered","onBeforeEvent","onBeforeRequest","onResponse","onRequestFailure","onClick","onDecision"],Ft=function(e,n){return function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return Promise.all(e.getLifecycleCallbacks(n).map((function(e){return new Promise((function(n){n(e.apply(void 0,r))}))})))}},Bt=function(e){return function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return Promise.resolve().then((function(){return e.apply(void 0,t)}))}},Ht=function(e){return Ut.reduce((function(n,t){return n[t]=Bt(Ft(e,t)),n}),{})},Vt=function(e,n){return function(){var t;try{t=e.apply(void 0,arguments)}catch(e){throw pn({error:e,message:n})}return t instanceof Promise&&(t=t.catch((function(e){throw pn({error:e,message:n})}))),t}},zt=function(){var e={},n={},t={},r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Be(Object.keys(n),Object.keys(t));if(r.length)throw new Error("[ComponentRegistry] Could not register "+e+" because it has existing command(s): "+r.join(","));Object.keys(t).forEach((function(r){var o=t[r];o.commandName=r,o.run=Vt(o.run,"["+e+"] An error occurred while executing the "+r+" command."),n[r]=o}))},o=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.keys(n).forEach((function(r){t[r]=t[r]||[],t[r].push(Vt(n[r],"["+e+"] An error occurred while executing the "+r+" lifecycle hook."))}))};return{register:function(n,t){var i=t.commands,a=t.lifecycle;r(n,i),o(n,a),e[n]=t},getCommand:function(e){return n[e]},getCommandNames:function(){return Object.keys(n)},getLifecycleCallbacks:function(e){return t[e]||[]},getComponentNames:function(){return Object.keys(e)}}},Gt=function(e){var n=e.logger,t=e.sendFetchRequest,r=e.sendBeaconRequest,o=e.isRequestRetryable,i=e.getRequestRetryDelay;return function(e){var a=e.requestId,c=e.url,u=e.payload,s=e.useSendBeacon,d=JSON.stringify(u),l=JSON.parse(d);n.logOnBeforeNetworkRequest({url:c,requestId:a,payload:l});var f=function e(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return(s?r:t)(c,d).then((function(t){var r;if(o({response:t,retriesAttempted:u})){var s=i({response:t,retriesAttempted:u});return new Promise((function(n){setTimeout((function(){n(e(u+1))}),s)}))}try{r=JSON.parse(t.body)}catch(e){}return n.logOnNetworkResponse(Uf(Uf({requestId:a,url:c,payload:l},t),{},{parsedBody:r,retriesAttempted:u})),{statusCode:t.statusCode,body:t.body,parsedBody:r,getHeader:t.getHeader}}))};return f().catch((function(e){throw n.logOnNetworkError({requestId:a,url:c,payload:l,error:e}),pn({error:e,message:"Network request failed."})}))}},Jt=function(e){var n=e.logger;return function(e){if(e){var t=e.split(";");if(t.length>=2&&t[1].length>0)try{var r=parseInt(t[1],10);if(!isNaN(r))return{regionId:r}}catch(e){}n.warn('Invalid adobe edge: "'+e+'"')}return{}}},Qt="in",Xt="out",Yt="pending",Kt="general",Wt="declinedConsent",$t="default",Zt="initial",er="new",nr=function(e){var n=new Error(e);return n.code=Wt,n.message=e,n},tr=function(e){var n=e.logger,t=[],r=function(){for(;t.length;)t.shift().resolve()},o=function(){for(;t.length;)t.shift().reject(nr("The user declined consent."))},i=function(){return Promise.resolve()},a=function(){return Promise.resolve()},c=function(){return Promise.reject(nr("No consent preferences have been set."))},u=function(){return Promise.reject(nr("The user declined consent."))},s=function(e){if(e)return Promise.reject(new Error("Consent is pending."));var n=O();return t.push(n),n.promise};return{in:function(e){e===$t?this.awaitConsent=i:(e===Zt?n.info("Loaded user consent preferences. The user previously consented."):e===er&&this.awaitConsent!==a&&n.info("User consented."),r(),this.awaitConsent=a)},out:function(e){e===$t?(n.warn("User consent preferences not found. Default consent of out will be used."),this.awaitConsent=c):(e===Zt?n.warn("Loaded user consent preferences. The user previously declined consent."):e===er&&this.awaitConsent!==u&&n.warn("User declined consent."),o(),this.awaitConsent=u)},pending:function(e){e===$t&&n.info("User consent preferences not found. Default consent of pending will be used. Some commands may be delayed."),this.awaitConsent=s},awaitConsent:function(){return Promise.reject(new Error("Consent has not been initialized."))},withConsent:function(){return this.awaitConsent(!0)},current:function(){switch(this.awaitConsent){case i:return{state:"in",wasSet:!1};case a:return{state:"in",wasSet:!0};case c:return{state:"out",wasSet:!1};case u:return{state:"out",wasSet:!0};case s:return{state:"pending",wasSet:!1};default:return{state:"in",wasSet:!1}}}}},rr=function(e){var n=e.generalConsentState,t=e.logger,r=function(e,r){switch(e[Kt]){case Qt:n.in(r);break;case Xt:n.out(r);break;case Yt:n.pending(r);break;default:t.warn("Unknown consent value: "+e[Kt])}};return{initializeConsent:function(e,n){n[Kt]?r(n,Zt):r(e,$t)},setConsent:function(e){r(e,er)},suspend:function(){n.pending()},awaitConsent:function(){return n.awaitConsent()},withConsent:function(){return n.withConsent()},current:function(){return n.current()}}},or=function(e){return e&&e._experience&&e._experience.decisioning&&Q(e._experience.decisioning.propositions)?e._experience.decisioning.propositions:[]},ir=function(){var e,n,t={},r=!1,o=!1,i=!0,a=function(e){if(o)throw new Error(e+" cannot be called after event is finalized.")},c={hasQuery:function(){return Object.prototype.hasOwnProperty.call(this.getContent(),"query")},getContent:function(){var r=JSON.parse(JSON.stringify(t));return e&&I(r,{xdm:e}),n&&I(r,{data:n}),r},setUserXdm:function(n){a("setUserXdm"),e=n},setUserData:function(e){a("setUserData"),n=e},mergeXdm:function(e){a("mergeXdm"),e&&I(t,{xdm:e})},mergeData:function(e){a("mergeData"),e&&I(t,{data:e})},mergeMeta:function(e){a("mergeMeta"),e&&I(t,{meta:e})},mergeQuery:function(e){a("mergeQuery"),e&&I(t,{query:e})},documentMayUnload:function(){r=!0},finalize:function(r){if(!o){var a=N([].concat(Vf(or(e)),Vf(or(t.xdm))),(function(e,n){return e===n||e.id&&n.id&&e.id===n.id&&e.scope&&n.scope&&e.scope===n.scope}));if(e&&this.mergeXdm(e),a.length>0&&(t.xdm._experience.decisioning.propositions=a),n&&c.mergeData(n),o=!0,r){i=!1;var u={xdm:t.xdm||{},data:t.data||{}},s=r(u);i=!1!==s,t.xdm=u.xdm||{},t.data=u.data||{},ke(t.xdm)&&delete t.xdm,ke(t.data)&&delete t.data}}},getDocumentMayUnload:function(){return r},isEmpty:function(){return ke(t)&&(!e||ke(e))&&(!n||ke(n))},shouldSend:function(){return i},getViewName:function(){if(e&&e.web&&e.web.webPageDetails)return e.web.webPageDetails.viewName},toJSON:function(){if(!o)throw new Error("toJSON called before finalize");return t}};return c},ar="Retry-After",cr="x-adobe-edge",ur=function(e){var n=e.extractEdgeInfo;return function(e){var t=e.content,r=void 0===t?{}:t,o=e.getHeader,i=r.handle,a=void 0===i?[]:i,c=r.errors,u=void 0===c?[]:c,s=r.warnings,d=void 0===s?[]:s;return{getPayloadsByType:function(e){return Te(a.filter((function(n){return n.type===e})),(function(e){return e.payload}))},getErrors:function(){return u},getWarnings:function(){return d},getEdge:function(){return n(o(cr))},toJSON:function(){return r}}}},sr="configure",dr="setDebug",lr=function(e){var n,t=e.logger,r=e.configureCommand,o=e.setDebugCommand,i=e.handleError,a=e.validateCommandOptions,c=function(e,i){var c;if(e===sr){if(n)throw new Error("The library has already been configured and may only be configured once.");c=function(){return(n=r(i)).then((function(){}))}}else{if(!n)throw new Error("The library must be configured first. Please do so by executing the configure command.");c=e===dr?function(){return o(i)}:function(){return n.then((function(n){var t=n.getCommand(e);if(!t||!J(t.run)){var r=[sr,dr].concat(n.getCommandNames()).join(", ");throw new Error("The "+e+" command does not exist. List of available commands: "+r+".")}var o=a({command:t,options:i});return t.run(o)}),(function(){return t.warn("An error during configuration is preventing the "+e+" command from executing."),new Promise((function(){}))}))}}return c};return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(r){var o=c(e,n);t.logOnBeforeCommand({commandName:e,options:n}),r(o())})).catch((function(n){return i(n,e+" command")})).catch((function(r){throw t.logOnCommandRejected({commandName:e,options:n,error:r}),r})).then((function(r){var o=y(r)?r:{};return t.logOnCommandResolved({commandName:e,options:n,result:o}),o}))}},fr="https://adobe.ly/3sHgQHb",pr=function(e){var n=e.command,t=e.options,r=n.commandName,o=n.documentationUri,i=void 0===o?fr:o,a=n.optionsValidator,c=t;if(a)try{c=a(t)}catch(e){throw new Error("Invalid "+r+" command options:\n\t - "+e+" For command documentation see: "+i)}return c},gr=function(e){var n=e.options;return At({type:Nt(),xdm:At({eventType:Nt(),identityMap:Mt}),data:At({}),documentUnloading:Tt(),renderDecisions:Tt(),decisionScopes:St(Nt()).uniqueItems(),personalization:At({decisionScopes:St(Nt()).uniqueItems(),surfaces:St(Nt()).uniqueItems(),sendDisplayEvent:Tt().default(!0),includeRenderedPropositions:Tt().default(!1),defaultPersonalizationEnabled:Tt(),decisionContext:At({})}).default({sendDisplayEvent:!0}),datasetId:Nt(),mergeId:Nt(),edgeConfigOverrides:_t,initializePersonalization:Tt()}).required().noUnknownFields()(n)},mr=function(e){var n=e.options;return At({renderDecisions:Tt(),responseHeaders:Rt(Nt().required()),responseBody:At({handle:St(At({type:Nt().required(),payload:kt().required()})).required()}).required(),personalization:At({sendDisplayEvent:Tt().default(!0),decisionContext:At({})}).default({sendDisplayEvent:!0})}).noUnknownFields()(n)},vr=["xdm","data","documentUnloading","type","mergeId","datasetId","edgeConfigOverrides"],hr=function(e){var n=e.eventManager,t=e.logger;return{commands:{sendEvent:{documentationUri:"https://adobe.ly/3GQ3Q7t",optionsValidator:function(e){return gr({options:e})},run:function(e){var r=e.xdm,o=e.data,i=e.documentUnloading,a=e.type,c=e.mergeId,u=e.datasetId,s=e.edgeConfigOverrides,d=Ff(e,vr),l=n.createEvent();return i&&l.documentMayUnload(),l.setUserXdm(r),l.setUserData(o),a&&l.mergeXdm({eventType:a}),c&&l.mergeXdm({eventMergeId:c}),s&&(d.edgeConfigOverrides=s),u&&(t.warn("The 'datasetId' option has been deprecated. Please use 'edgeConfigOverrides.com_adobe_experience_platform.datasets.event.datasetId' instead."),d.edgeConfigOverrides=s||{},I(d.edgeConfigOverrides,{com_adobe_experience_platform:{datasets:{event:{datasetId:u}}}})),n.sendEvent(l,d)}},applyResponse:{documentationUri:"",optionsValidator:function(e){return mr({options:e})},run:function(e){var t=e.renderDecisions,r=void 0!==t&&t,o=e.decisionContext,i=void 0===o?{}:o,a=e.responseHeaders,c=void 0===a?{}:a,u=e.responseBody,s=void 0===u?{handle:[]}:u,d=e.personalization,l=n.createEvent();return n.applyResponse(l,{renderDecisions:r,decisionContext:i,responseHeaders:c,responseBody:s,personalization:d})}}}}};hr.namespace="DataCollector";var yr,br=function(e){var n=e.eventManager,t=e.lifecycle,r=e.handleError;return function(e){if(e.s_fe)return Promise.resolve();var o=e.target,i=n.createEvent();return i.documentMayUnload(),t.onClick({event:i,clickedElement:o}).then((function(){return i.isEmpty()?Promise.resolve():n.sendEvent(i)})).then(Ye).catch((function(e){r(e,"click collection")}))}},wr=function(e){var n=e.eventManager,t=e.lifecycle,r=e.handleError,o=br({eventManager:n,lifecycle:t,handleError:r});document.addEventListener("click",o,!0)},Er=Nt().regexp().default("\\.(exe|zip|wav|mp3|mov|mpg|avi|wmv|pdf|doc|docx|xls|xlsx|ppt|pptx)$"),Cr=At({clickCollectionEnabled:Tt().default(!0),clickCollection:At({internalLinkEnabled:Tt().default(!0),externalLinkEnabled:Tt().default(!0),downloadLinkEnabled:Tt().default(!0),sessionStorageEnabled:Tt().default(!1),eventGroupingEnabled:Tt().default(!1),filterClickProperties:Dt()}).default({internalLinkEnabled:!0,externalLinkEnabled:!0,downloadLinkEnabled:!0,sessionStorageEnabled:!1,eventGroupingEnabled:!1}),downloadLinkQualifier:Er,onBeforeLinkClickSend:Dt().deprecated('The field "onBeforeLinkClickSend" has been deprecated. Use "clickCollection.filterClickDetails" instead.')}),Ir="cppXYctnr",kr=function(){return null!==(arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).getElementById(Ir)},Sr=function(e){var n=e;return/^https?:\/\//i.test(n)||(n=window.location.protocol+"//"+e),new URL(n).hostname},Tr=function(e,n){return Sr(e)!==Sr(n)},Dr=function(e,n){return n&&("download"===n&&!e.downloadLinkEnabled||"exit"===n&&!e.externalLinkEnabled||"other"===n&&!e.internalLinkEnabled)},Pr=function(e){var n=e.config,t=e.logger,r=e.getClickedElementProperties,o=e.clickActivityStorage,i=n.clickCollectionEnabled,a=n.clickCollection;return i?function(e){var i=e.event,c=e.clickedElement,u=r({clickActivityStorage:o,clickedElement:c,config:n,logger:t}),s=u.linkType;kr()||(u.isValidLink()&&Dr(a,s)?t.info("Cancelling link click event due to clickCollection."+s+"LinkEnabled = false."):!u.isInternalLink()||!a.eventGroupingEnabled||n.onBeforeLinkClickSend&&!a.filterClickDetails||Tr(window.location.hostname,u.linkUrl)?u.isValidLink()?(i.mergeXdm(u.xdm),i.mergeData(u.data),o.save({pageName:u.pageName,pageIDType:u.pageIDType})):u.isValidActivityMapData()&&o.save(u.properties):o.save(u.properties))}:function(){}},Or=function(e){return{eventType:"web.webinteraction.linkClicks",web:{webInteraction:{name:e.linkName,region:e.linkRegion,type:e.linkType,URL:e.linkUrl,linkClicks:{value:1}}}}},Rr=function(e){return{__adobe:{analytics:{contextData:{a:{activitymap:{page:e.pageName,link:e.linkName,region:e.linkRegion,pageIDType:e.pageIDType}}}}}}},Ar=function(e,n){var t=e.xdm,r=e.data,o=e.clickedElement;if(n.clickedElement=o,t&&t.web&&t.web.webInteraction){var i=t.web.webInteraction,a=i.name,c=i.region,u=i.type,s=i.URL;n.linkName=a,n.linkRegion=c,n.linkType=u,n.linkUrl=s}if(r&&r.__adobe&&r.__adobe.analytics){var d=r.__adobe.analytics.contextData;if(d&&d.a&&d.a.activitymap){var l=d.a.activitymap,f=l.page,p=l.link,g=l.region,m=l.pageIDType;n.pageName=f||n.pageName,n.linkName=p||n.linkName,n.linkRegion=g||n.linkRegion,void 0!==m&&(n.pageIDType=m)}}},Nr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.properties,t=e.logger,r=n||{};return{get pageName(){return r.pageName},set pageName(e){r.pageName=e},get linkName(){return r.linkName},set linkName(e){r.linkName=e},get linkRegion(){return r.linkRegion},set linkRegion(e){r.linkRegion=e},get linkType(){return r.linkType},set linkType(e){r.linkType=e},get linkUrl(){return r.linkUrl},set linkUrl(e){r.linkUrl=e},get pageIDType(){return r.pageIDType},set pageIDType(e){r.pageIDType=e},get clickedElement(){return r.clickedElement},set clickedElement(e){r.clickedElement=e},get properties(){return{pageName:r.pageName,linkName:r.linkName,linkRegion:r.linkRegion,linkType:r.linkType,linkUrl:r.linkUrl,pageIDType:r.pageIDType}},isValidLink:function(){return!!(r.linkUrl&&r.linkType&&r.linkName&&r.linkRegion)},isInternalLink:function(){return this.isValidLink()&&"other"===r.linkType},isValidActivityMapData:function(){return!!r.pageName&&!!r.linkName&&!!r.linkRegion&&void 0!==r.pageIDType},get xdm(){return r.filteredXdm?r.filteredXdm:Or(this)},get data(){return r.filteredData?r.filteredData:Rr(this)},applyPropertyFilter:function(e){e&&!1===e(r)&&(t&&t.info("Clicked element properties were rejected by filter function: "+JSON.stringify(this.properties,null,2)),r={})},applyOptionsFilter:function(e){var n=this.options;if(n&&n.clickedElement&&(n.xdm||n.data)){if(e&&!1===e(n))return t&&t.info("Clicked element properties were rejected by filter function: "+JSON.stringify(this.properties,null,2)),void(this.options=void 0);this.options=n,r.filteredXdm=n.xdm,r.filteredData=n.data}},get options(){var e={};if(this.isValidLink()&&(e.xdm=this.xdm),this.isValidActivityMapData()&&(e.data=this.data),this.clickedElement&&(e.clickedElement=this.clickedElement),e.xdm||e.data)return e},set options(e){r={},e&&Ar(e,r)}}},xr=function(e){var n=e.clickActivityStorage;return function(e){if(!kr()){var t=n.load(),r=Nr({properties:t});if(r.isValidLink()||r.isValidActivityMapData()){if(r.isValidLink()){var o=r.xdm;delete o.eventType,e.mergeXdm(o)}r.isValidActivityMapData()&&e.mergeData(r.data),n.save({pageName:r.pageName,pageIDType:r.pageIDType})}}}},Mr=function(e){var n=e.window,t=e.getLinkName,r=e.getLinkRegion,o=e.getAbsoluteUrlFromAnchorElement,i=e.findClickableElement,a=e.determineLinkType;return function(e){var c=e.clickedElement,u=e.config,s=e.logger,d=e.clickActivityStorage,l=u.onBeforeLinkClickSend,f=u.clickCollection.filterClickDetails,p=Nr({logger:s});if(c){var g=i(c);if(g){p.clickedElement=c,p.linkUrl=o(n,g),p.linkType=a(n,u,p.linkUrl,g),p.linkRegion=r(g),p.linkName=t(g),p.pageIDType=0,p.pageName=n.location.href;var m=d.load();m&&m.pageName&&(p.pageName=m.pageName,p.pageIDType=1),f?p.applyPropertyFilter(f):l&&p.applyOptionsFilter(l)}}return p}},_r="clickData",qr=function(e){var n=e.storage;return{save:function(e){var t=JSON.stringify(e);n.setItem(_r,t)},load:function(){var e=null,t=n.getItem(_r);return t&&(e=JSON.parse(t)),e},remove:function(){n.removeItem(_r)}}},Lr=function(e){var n=e.clickActivityStorage;return function(e){n.save({pageName:e.getContent().xdm.web.webPageDetails.name,pageIDType:1})}},jr=function(e){return e&&e.replace(/\s+/g," ").trim()},Ur=/^(SCRIPT|STYLE|LINK|CANVAS|NOSCRIPT|#COMMENT)$/i,Fr=function(e){return!(e&&e.nodeName&&e.nodeName.match(Ur))},Br=function e(n){var t=[],r=!1;Fr(n)?(t.push(n),n.childNodes&&Array.prototype.slice.call(n.childNodes).forEach((function(n){var o=e(n);t=t.concat(o.supportedNodes),r=r||o.includesUnsupportedNodes}))):r=!0;return{supportedNodes:t,includesUnsupportedNodes:r}},Hr=function(e,n,t){var r;return t&&t!==e.nodeName.toUpperCase()||(r=e.getAttribute(n)),r},Vr=function(e){var n={texts:[]};return e.supportedNodes.forEach((function(e){e.getAttribute&&(n.alt||(n.alt=jr(e.getAttribute("alt"))),n.title||(n.title=jr(e.getAttribute("title"))),n.inputValue||(n.inputValue=jr(Hr(e,"value","INPUT"))),n.imgSrc||(n.imgSrc=jr(Hr(e,"src","IMG")))),e.nodeValue&&n.texts.push(e.nodeValue)})),n},zr=/^(HEADER|MAIN|FOOTER|NAV)$/i,Gr=function(e){var n;return"region"===e.role&&Qe(e["aria-label"])&&(n=e["aria-label"]),n},Jr=function(e){var n;return e&&e.nodeName&&e.nodeName.match(zr)&&(n=e.nodeName),n},Qr=function(e){return!!e&&/^[a-z0-9]+:\/\//i.test(e)},Xr=function(e){return!(!e.href||"A"!==e.tagName&&"AREA"!==e.tagName||e.onclick&&e.protocol&&!(e.protocol.toLowerCase().indexOf("javascript")<0))},Yr=function(e){return!!e&&!!e.onclick},Kr=function(e){if("INPUT"===e.tagName){var n=e.getAttribute("type");if("submit"===n)return!0;if("image"===n&&e.src)return!0}return!1},Wr=function(e){return"BUTTON"===e.tagName&&"submit"===e.type},$r=function(e){var n=e.indexOf("?"),t=e.indexOf("#");return n>=0&&(n<t||t<0)?e.substring(0,n):t>=0?e.substring(0,t):e},Zr=function(e,n,t){var r=!1;if(n)if(t&&t.download)r=!0;else if(e){var o=new RegExp(e),i=$r(n).toLowerCase();r=o.test(i)}return r},eo=function(e,n){var t=!1;if(n&&e.location.hostname){var r=e.location.hostname.toLowerCase();t=$r(n).toLowerCase().indexOf(r)<0}return t},no=function(e){var n=e.getContent();return void 0!==n.xdm&&void 0!==n.xdm.web&&void 0!==n.xdm.web.webPageDetails&&void 0!==n.xdm.web.webPageDetails.name},to=function(){var e={};return{getItem:function(n){return e[n]},setItem:function(n,t){e[n]=t},removeItem:function(n){delete e[n]}}},ro=Mr({window:window,getLinkName:function(e){var n=jr(e.innerText||e.textContent),t=Br(e);if(!n||t.includesUnsupportedNodes){var r=Vr(t);(n=jr(r.texts.join("")))||(n=r.alt||r.title||r.inputValue||r.imgSrc)}return n||""},getLinkRegion:function(e){for(var n,t=e.parentNode;t;){if(n=jr(t.id||Gr(t)||Jr(t)))return n;t=t.parentNode}return"BODY"},getAbsoluteUrlFromAnchorElement:function(e,n){var t=e.location,r=n.href||"";"string"!=typeof r&&(r="");var o=n.protocol,i=n.host;if(r&&!Qr(r)){o||(o=t.protocol?t.protocol:""),o=o?o+"//":"",i||(i=t.host?t.host:"");var a="";if("/"!==r.substring(0,1)){var c=t.pathname.lastIndexOf("/");c=c<0?0:c,a=t.pathname.substring(0,c)}r=""+o+i+a+"/"+r}return r},findClickableElement:function(e){for(var n=e;n;){if(Xr(n)||Yr(n)||Kr(n)||Wr(n))return n;n=n.parentNode}return null},determineLinkType:function(e,n,t,r){var o="other";return Qe(t)&&(Zr(n.downloadLinkQualifier,t,r)?o="download":eo(e,t)&&(o="exit")),o}}),oo=function(e){var n=e.config,t=e.eventManager,r=e.handleError,o=e.logger,i=n.clickCollection,a=Fe(window)(n.orgId||""),c=to(),u=i.sessionStorageEnabled?a.session:c;yr=qr({storage:u});var s=Pr({config:n,logger:o,clickActivityStorage:yr,getClickedElementProperties:ro}),d=xr({clickActivityStorage:yr}),l=Lr({clickActivityStorage:yr});return{lifecycle:{onComponentsRegistered:function(e){var n=e.lifecycle;wr({eventManager:t,lifecycle:n,handleError:r})},onClick:function(e){var n=e.event,t=e.clickedElement;s({event:n,clickedElement:t})},onBeforeEvent:function(e){var n=e.event;no(n)&&(i.eventGroupingEnabled&&d(n),l(n,o,yr))}}}};oo.namespace="ActivityCollector",oo.configValidators=Cr,oo.buildOnInstanceConfiguredExtraParams=function(e){var n=e.config,t=e.logger;return{getLinkDetails:function(e){return ro({clickActivityStorage:yr,clickedElement:e,config:n,logger:t}).properties}}};var io=function(e,n){return"ID sync "+(n?"succeeded":"failed")+": "+e.spec.url},ao=function(e){var n=e.fireReferrerHideableImage,t=e.logger;return function(e){var r=e.filter((function(e){return"url"===e.type}));return r.length?Promise.all(r.map((function(e){return n(e.spec).then((function(){t.info(io(e,!0))})).catch((function(){t.error(io(e,!1))}))}))).then(Ye):Promise.resolve()}},co=At({thirdPartyCookiesEnabled:Tt().default(!0),idMigrationEnabled:Tt().default(!0)}),uo=At({namespaces:St(Pt("ECID")).nonEmpty().uniqueItems().default(["ECID"]),edgeConfigOverrides:_t}).noUnknownFields().default({namespaces:["ECID"]}),so=At({url:Nt().required().nonEmpty(),edgeConfigOverrides:_t}).required().noUnknownFields(),lo=function(e){var n,t=e.addEcidQueryToPayload,r=e.addQueryStringIdentityToPayload,o=e.ensureSingleIdentity,i=e.setLegacyEcid,a=e.handleResponseForIdSyncs,c=e.getEcidFromResponse,u=e.getIdentity,s=e.consent,d=e.appendIdentityToUrl,l=e.logger,f={};return{lifecycle:{onBeforeRequest:function(e){var n=e.request,i=e.onResponse,a=e.onRequestFailure;return t(n.getPayload()),r(n.getPayload()),o({request:n,onResponse:i,onRequestFailure:a})},onResponse:function(e){var t=e.response;return n||(n=c(t))&&i(n),f=v(f,t.getEdge()),a(t)}},commands:{getIdentity:{optionsValidator:uo,run:function(e){return s.awaitConsent().then((function(){return n?void 0:u(e)})).then((function(){return{identity:{ECID:n},edge:f}}))}},appendIdentityToUrl:{optionsValidator:so,run:function(e){return s.withConsent().then((function(){return n?void 0:u(e)})).then((function(){return{url:d(n,e.url)}})).catch((function(n){return l.warn("Unable to append identity to url. "+n.message),e}))}}}}},fo=function(e){var n=e.config,t=e.getEcidFromVisitor,r=e.apexDomain,o=e.isPageSsl,i=e.cookieJar,a=n.idMigrationEnabled,c="AMCV_"+n.orgId,u=function(){var e=null,n="s_ecid",t=i.get(n)||i.get(c);if(t){var r=/(^|\|)MCMID\|(\d+)($|\|)/,o=t.match(r);o&&(e=o[2])}return e};return{getEcid:function(){if(a){var e=u();return e?Promise.resolve(e):t()}return Promise.resolve()},setEcid:function(e){if(a&&u()!==e){var n=o?{sameSite:"none",secure:!0}:{};i.set(c,"MCMID|"+e,Uf({domain:r,expires:390},n))}}}},po=function(e){var n=e.logger;return new Promise((function(e,t){if(y(window.adobe)&&y(window.adobe.optIn)){var r=window.adobe.optIn;n.info("Delaying request while waiting for legacy opt-in to let Visitor retrieve ECID from server."),r.fetchPermissions((function(){r.isApproved([r.Categories.ECID])?(n.info("Received legacy opt-in approval to let Visitor retrieve ECID from server."),e()):t(new Error("Legacy opt-in was declined."))}),!0)}else e()}))},go=function(e){var n=e.Visitor;return J(n)&&J(n.getInstance)&&n},mo=function(e){var n=e.logger,t=e.orgId,r=e.awaitVisitorOptIn;return function(){var e=go(window);return e?r({logger:n}).then((function(){return n.info("Delaying request while using Visitor to retrieve ECID from server."),new Promise((function(r){e.getInstance(t,{}).getMarketingCloudVisitorID((function(e){n.info("Resuming previously delayed request that was waiting for ECID from Visitor."),r(e)}),!0)}))})).catch((function(e){e?n.info(e.message+", retrieving ECID from experience edge"):n.info("An error occurred while obtaining the ECID from Visitor.")})):Promise.resolve()}},vo=function(e){var n=e.processIdSyncs;return function(e){return n(e.getPayloadsByType("identity:exchange"))}},ho=function(e){var n,t=e.doesIdentityCookieExist,r=e.setDomainForInitialIdentityPayload,o=e.addLegacyEcidToPayload,i=e.awaitIdentityCookie,a=e.logger,c=function(e){return r(e),o(e.getPayload())};return function(e){var r=e.request,o=e.onResponse,u=e.onRequestFailure;if(t())return r.setIsIdentityEstablished(),Promise.resolve();if(n){a.info("Delaying request while retrieving ECID from server.");var s=n;return n=s.catch((function(){return i({onResponse:o,onRequestFailure:u})})),s.then((function(){a.info("Resuming previously delayed request."),r.setIsIdentityEstablished()})).catch((function(){return c(r)}))}return(n=i({onResponse:o,onRequestFailure:u})).catch((function(){})),c(r)}},yo="ECID",bo=function(e){e.mergeQuery({identity:{fetch:[yo]}})},wo=function(e){return function(n){for(var t=Object.keys(e),r=0;r<t.length;r+=1){var o=t[r];if(e[o].test(n))return o}return c}},Eo=Xe((function(e){return wo(xf(xf(xf(xf(xf(xf({},t,/Edge\/([0-9\._]+)/),r,/Edg\/([0-9\.]+)/),n,/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/),o,/Firefox\/([0-9\.]+)(?:\s|$)/),i,/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/),a,/Version\/([0-9\._]+).*Safari/))(e.navigator.userAgent)})),Co=function(e){var n=e.thirdPartyCookiesEnabled,t=e.areThirdPartyCookiesSupportedByDefault;return function(e){n&&t(Eo(window))&&e.setUseIdThirdPartyDomain()}},Io=function(e){var n=e.getLegacyEcid,t=e.addEcidToPayload;return function(e){return e.hasIdentity(yo)?Promise.resolve():n().then((function(n){n&&t(e,n)}))}},ko="adobe_mc",So=300,To=function(e){var n=e.locationSearch,t=e.dateProvider,r=e.orgId,o=e.logger;return function(e){if(!e.hasIdentity(yo)){var i=dn.parse(n)[ko];if(void 0!==i){Array.isArray(i)&&(o.warn("Found multiple adobe_mc query string paramters, only using the last one."),i=i[i.length-1]);var a=i.split("|").reduce((function(e,n){var t=Hf(n.split("="),2),r=t[0],o=t[1];return e[r]=o,e}),{}),c=parseInt(a.TS,10),u=a.MCMID,s=decodeURIComponent(a.MCORGID);t().getTime()/1e3<=c+So&&s===r&&u?(o.info("Found valid ECID identity "+u+" from the adobe_mc query string parameter."),e.addIdentity(yo,{id:u})):o.info("Detected invalid or expired adobe_mc query string parameter.")}}}},Do=function(e,n){e.addIdentity(yo,{id:n})},Po=function(e){var n=e.doesIdentityCookieExist,t=e.orgId,r=e.logger;return function(e){var o=e.onResponse,i=e.onRequestFailure;return new Promise((function(e,a){o((function(){n()?e():(r.warn("Identity cookie not found. This could be caused by any of the following issues:\n\t* The org ID "+t+" configured in Alloy doesn't match the org ID specified in the edge configuration.\n\t* Experience edge was not able to set the identity cookie due to domain or cookie restrictions.\n\t* The request was canceled by the browser and not fully processed."),a(new Error("Identity cookie not found.")))})),i((function(){n()?e():a(new Error("Identity cookie not found."))}))}))}},Oo=function(e){var n=e.getPayloadsByType("identity:result"),t=M(n,(function(e){return e.namespace&&e.namespace.code===yo}));return t?t.id:void 0},Ro=function(e){return function(n,t){e.xdm=e.xdm||{},e.xdm.identityMap=e.xdm.identityMap||{},e.xdm.identityMap[n]=e.xdm.identityMap[n]||[],e.xdm.identityMap[n].push(t)}},Ao=function(e){var n=e.payload,t=e.getAction,r=e.getUseSendBeacon,o=e.datastreamIdOverride,i=e.edgeSubPath,a=Zf(),c=!1,u=!1;return{getId:function(){return a},getPayload:function(){return n},getAction:function(){return t({isIdentityEstablished:u})},getDatastreamIdOverride:function(){return o},getUseSendBeacon:function(){return r({isIdentityEstablished:u})},getEdgeSubPath:function(){return i||""},getUseIdThirdPartyDomain:function(){return c},setUseIdThirdPartyDomain:function(){c=!0},setIsIdentityEstablished:function(){u=!0}}},No=function(e){var n=e.payload,t=e.datastreamIdOverride,r=function(e){var t=e.isIdentityEstablished;return n.getDocumentMayUnload()&&t};return Ao({payload:n,getAction:function(e){var n=e.isIdentityEstablished;return r({isIdentityEstablished:n})?"collect":"interact"},getUseSendBeacon:r,datastreamIdOverride:t})},xo=function(e){var n=e.content,t=e.addIdentity,r=e.hasIdentity,o=k(n,"meta.configOverrides");return{mergeMeta:k(n,"meta"),mergeState:k(n,"meta.state"),mergeQuery:k(n,"query"),mergeConfigOverride:function(e){return o(nn(e))},addIdentity:t,hasIdentity:r,toJSON:function(){return n}}},Mo=function(e){return function(n){return void 0!==(e.xdm&&e.xdm.identityMap&&e.xdm.identityMap[n])}},_o=function(){var e={},n=xo({content:e,addIdentity:Ro(e),hasIdentity:Mo(e)});return n.addEvent=function(n){e.events=e.events||[],e.events.push(n)},n.getDocumentMayUnload=function(){return(e.events||[]).some((function(e){return e.getDocumentMayUnload()}))},n},qo=["datastreamId"],Lo=function(e){var n=e.localConfigOverrides,t=e.globalConfigOverrides,r=e.payload,o={payload:r},i=n||{},a=i.datastreamId,c=Ff(i,qo);return a&&(o.datastreamIdOverride=a),r.mergeConfigOverride(t),r.mergeConfigOverride(c),o},jo="adb_validation_sessionid",Uo="validation.",Fo="clientId",Bo=function(e){var n=e.persistent.getItem(Fo);return n||(n=Zf(),e.persistent.setItem(Fo,n)),n},Ho=function(e){var n=e.window,t=(0,e.createNamespacedStorage)(Uo);return function(){var e=dn.parse(n.location.search)[jo];if(!e)return"";var r=e+"|"+Bo(t);return"&"+dn.stringify({adobeAepValidationToken:r})}},Vo=function(e){var n=e.sendEdgeNetworkRequest,t=e.createIdentityRequestPayload,r=e.createIdentityRequest,o=e.globalConfigOverrides;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.namespaces,a=e.edgeConfigOverrides,c=Lo({payload:t(i),globalConfigOverrides:o,localConfigOverrides:a}),u=r(c);return n({request:u})}},zo=function(e){var n=e.payload,t=e.datastreamIdOverride;return Ao({payload:n,datastreamIdOverride:t,getAction:function(){return"identity/acquire"},getUseSendBeacon:function(){return!1}})},Go=function(e){var n={query:{identity:{fetch:e}}};return xo({content:n,addIdentity:Ro(n),hasIdentity:Mo(n)})},Jo=/^([^?#]*)(\??[^#]*)(#?.*)$/,Qo=function(e){return""===e?"?":"?"===e?"":"&"},Xo=function(e){var n=e.dateProvider,t=e.orgId;return function(e,r){var o=Math.round(n().getTime()/1e3),i=encodeURIComponent("TS="+o+"|MCMID="+e+"|MCORGID="+encodeURIComponent(t)),a=Hf(r.match(Jo),4),c=a[1],u=a[2],s=a[3];return""+c+u+Qo(u)+"adobe_mc="+i+s}},Yo=function(e){var n=e.config,t=e.logger,r=e.consent,o=e.fireReferrerHideableImage,i=e.sendEdgeNetworkRequest,a=e.apexDomain,c=n.orgId,u=n.thirdPartyCookiesEnabled,s=n.edgeConfigOverrides,l=mo({logger:t,orgId:c,awaitVisitorOptIn:po}),f=T({logger:t,cookieJar:E}),p=fo({config:n,getEcidFromVisitor:l,apexDomain:a,cookieJar:f,isPageSsl:"https:"===window.location.protocol}),g=je({orgId:c}),m=Vo({sendEdgeNetworkRequest:i,createIdentityRequestPayload:Go,createIdentityRequest:zo,globalConfigOverrides:s}),v=Co({thirdPartyCookiesEnabled:u,areThirdPartyCookiesSupportedByDefault:d}),h=Io({getLegacyEcid:p.getEcid,addEcidToPayload:Do}),y=To({locationSearch:window.document.location.search,dateProvider:function(){return new Date},orgId:c,logger:t}),b=Po({doesIdentityCookieExist:g,orgId:c,logger:t}),w=ho({doesIdentityCookieExist:g,setDomainForInitialIdentityPayload:v,addLegacyEcidToPayload:h,awaitIdentityCookie:b,logger:t}),C=ao({fireReferrerHideableImage:o,logger:t}),I=vo({processIdSyncs:C}),k=Xo({dateProvider:function(){return new Date},orgId:c,globalConfigOverrides:s});return lo({addEcidQueryToPayload:bo,addQueryStringIdentityToPayload:y,ensureSingleIdentity:w,setLegacyEcid:p.setEcid,handleResponseForIdSyncs:I,getEcidFromResponse:Oo,getIdentity:m,consent:r,appendIdentityToUrl:k,logger:t,config:n})};Yo.namespace="Identity",Yo.configValidators=co;var Ko=function(e,n){return"URL destination succeeded: "+e.spec.url},Wo=function(e){var n=e.fireReferrerHideableImage,t=e.logger,r=e.cookieJar,o=e.isPageSsl?{sameSite:"none",secure:!0}:{},i=function(e){e.filter((function(e){return"cookie"===e.type})).forEach((function(e){var n=e.spec,t=n.name,i=n.value,a=n.domain,c=n.ttlDays;r.set(t,i||"",Uf({domain:a||"",expires:c||10},o))}))},a=function(e){var r=e.filter((function(e){return"url"===e.type}));return Promise.all(r.map((function(e){return n(e.spec).then((function(){t.info(Ko(e))})).catch((function(){}))}))).then(Ye)};return function(e){return i(e),a(e)}},$o=function(e){var n=e.processDestinations,t=function(e){var t=e.response.getPayloadsByType("activation:push");return n(t)},r=function(e){return{destinations:e.response.getPayloadsByType("activation:pull")}};return function(e){var n=e.response;return t({response:n}).then((function(){return r({response:n})}))}},Zo=function(e){var n=e.logger,t=e.fireReferrerHideableImage,r=E.withConverter({write:function(e){return encodeURIComponent(e)}}),o=T({logger:n,cookieJar:r}),i=Wo({fireReferrerHideableImage:t,logger:n,cookieJar:o,isPageSsl:"https:"===window.location.protocol});return{lifecycle:{onResponse:$o({processDestinations:i})},commands:{}}};Zo.namespace="Audiences";var ei="web",ni="webapp",ti="://",ri="#",oi=/^(\w+):\/\/([^/#]+)(\/[^#]*)?(#.*)?$/,ii=/^(?:.*@)?(?:[a-z\d\u00a1-\uffff.-]+|\[[a-f\d:]+])(?::\d+)?$/,ai=/^\/(?:[/\w\u00a1-\uffff-.~]|%[a-fA-F\d]{2})*$/,ci=/^#(?:[/\w\u00a1-\uffff-.~]|%[a-fA-F\d]{2})+$/,ui=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",n=e.length;n>0&&-1!=="/".indexOf(e.charAt(n-1));)n-=1;return e.substring(0,n)||"/"},si=function(e){return Qe(e)?e.toLowerCase():""},di=function(e){return Qe(e)?e.toLowerCase():""},li=function(e){return Qe(e)?ui(e):"/"},fi=function(e){var n=e.match(oi);return n?{surfaceType:si(n[1]),authority:di(n[2]),path:li(n[3]),fragment:n[4]}:null},pi=function(e){return""+e.surfaceType+ti+e.authority+(e.path||"")+(e.fragment||"")},gi=function(e){var n=e(),t=n.host.toLowerCase(),r=n.pathname;return ei+ti+t+ui(r)},mi=function(e,n){return W(e,ri)?gi(n)+e:e},vi=function(e,n,t){var r=function(e){return t.warn(e),null};if(!Qe(e))return r("Invalid surface: "+e);var o=mi(e,n),i=fi(o);return null===i?r("Invalid surface: "+e):u([ei,ni],i.surfaceType)?i.authority&&ii.test(i.authority)?i.path&&!ai.test(i.path)?r("Invalid path "+i.path+" in surface: "+e):i.fragment&&!ci.test(i.fragment)?r("Invalid fragment "+i.fragment+" in surface: "+e):i:r("Invalid authority "+i.authority+" in surface: "+e):r("Unsupported surface type "+i.surfaceType+" in surface: "+e)},hi=function(e){return!!e&&0===e.indexOf(ei+ti)&&-1===e.indexOf(ri)},yi=function(){var e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(t){return vi(t,e,n)})).filter((function(e){return!h(e)})).map(pi)},bi="__view__",wi="https://ns.adobe.com/personalization/default-content-item",Ei="https://ns.adobe.com/personalization/dom-action",Ci="https://ns.adobe.com/personalization/html-content-item",Ii="https://ns.adobe.com/personalization/json-content-item",ki="https://ns.adobe.com/personalization/ruleset-item",Si="https://ns.adobe.com/personalization/redirect-item",Ti="https://ns.adobe.com/personalization/message/in-app",Di="https://ns.adobe.com/personalization/message/feed-item",Pi=function(e){u(e,bi)||e.push(bi)},Oi=function(e,n){var t=gi(n);u(e,t)||e.push(t)},Ri=function(e){return e.filter((function(n,t){return e.indexOf(n)===t}))},Ai=function(e){var n=e.getPageLocation,t=e.renderDecisions,r=e.decisionScopes,o=e.personalization,i=e.event,a=e.isCacheInitialized,c=e.logger,s=i.getViewName();return{isRenderDecisions:function(){return t},isSendDisplayEvent:function(){return!!o.sendDisplayEvent},shouldIncludeRenderedPropositions:function(){return!!o.includeRenderedPropositions},getViewName:function(){return s},hasScopes:function(){return r.length>0||Q(o.decisionScopes)},hasSurfaces:function(){return Q(o.surfaces)},hasViewName:function(){return Qe(s)},createQueryDetails:function(){var e=Vf(r);Q(o.decisionScopes)&&e.push.apply(e,Vf(o.decisionScopes));var t=yi(o.surfaces,n,c);this.shouldRequestDefaultPersonalization()&&(Pi(e),Oi(t,n));var i=[wi,Ci,Ii,Si,ki,Ti,Di];return u(e,bi)&&i.push(Ei),{schemas:i,decisionScopes:Ri(e),surfaces:Ri(t)}},isCacheInitialized:function(){return a},shouldFetchData:function(){return this.hasScopes()||this.hasSurfaces()||this.shouldRequestDefaultPersonalization()},shouldUseCachedData:function(){return this.hasViewName()&&!this.shouldFetchData()},shouldRequestDefaultPersonalization:function(){return o.defaultPersonalizationEnabled||!this.isCacheInitialized()&&!1!==o.defaultPersonalizationEnabled}}},Ni="Rendering is disabled for authoring mode.",xi="decisioning.propositionDisplay",Mi="decisioning.propositionInteract",_i="decisioning.propositionTrigger",qi="decisioning.propositionDismiss",Li=1,ji={DISPLAY:"display",INTERACT:"interact",TRIGGER:"trigger",DISMISS:"dismiss"},Ui=xf(xf(xf(xf({},xi,ji.DISPLAY),Mi,ji.INTERACT),_i,ji.TRIGGER),qi,ji.DISMISS);xf(xf(xf(xf({},ji.DISPLAY,xi),ji.INTERACT,Mi),ji.TRIGGER,_i),ji.DISMISS,qi);var Fi,Bi,Hi=function(e){return Ui[e]},Vi={propositions:[]},zi=function(e){var n=e.logger,t=e.options,r=At({propositions:St(At({id:Nt().required(),scope:Nt().required(),scopeDetails:At({decisionProvider:Nt().required()}).required(),items:St(At({id:Nt().required(),schema:Nt().required(),data:kt().required()})).nonEmpty().required()}).required()).nonEmpty().required(),metadata:At(kt()),viewName:Nt()}).required();try{return r(t)}catch(e){return n.warn("Invalid options for applyPropositions. No propositions will be applied.",e),Vi}},Gi=function(e){var n=e.getPageLocation,t=e.logger,r=e.fetchDataHandler,o=e.viewChangeHandler,i=e.onClickHandler,a=e.isAuthoringModeEnabled,c=e.mergeQuery,u=e.viewCache,s=e.showContainers,d=e.applyPropositions,l=e.setTargetMigration,f=e.mergeDecisionsMeta,p=e.renderedPropositions,g=e.onDecisionHandler,m=e.handleConsentFlicker;return{lifecycle:{onComponentsRegistered:function(){m()},onDecision:g,onBeforeRequest:function(e){var n=e.request;return l(n),Promise.resolve()},onBeforeEvent:function(e){var i=e.event,d=e.renderDecisions,l=e.decisionScopes,g=void 0===l?[]:l,m=e.personalization,v=void 0===m?{}:m,h=e.onResponse,y=void 0===h?Ye:h,b=e.onRequestFailure,w=void 0===b?Ye:b;if(y((function(){return{propositions:[]}})),w((function(){return s()})),a())return t.warn(Ni),c(i,{enabled:!1}),Promise.resolve();var E=Ai({getPageLocation:n,renderDecisions:d,decisionScopes:g,personalization:v,event:i,isCacheInitialized:u.isInitialized(),logger:t}),C=[];if(E.shouldIncludeRenderedPropositions()&&C.push(p.clear()),E.shouldFetchData()){var I=u.createCacheUpdate(E.getViewName());w((function(){return I.cancel()})),r({cacheUpdate:I,personalizationDetails:E,event:i,onResponse:y})}else E.shouldUseCachedData()&&C.push(o({personalizationDetails:E,event:i,onResponse:y,onRequestFailure:w}));return Promise.all(C).then((function(e){var n=Te(e,(function(e){return e}));Q(n)&&f(i,n,[ji.DISPLAY])}))},onClick:function(e){var n=e.event,t=e.clickedElement;i({event:n,clickedElement:t})}},commands:{applyPropositions:{optionsValidator:function(e){return zi({logger:t,options:e})},run:d}}}},Ji=function(e){return L(B,{},{innerHTML:e})},Qi={exports:{}};Fi=l,Bi=function(e){if(e.CSS&&e.CSS.escape)return e.CSS.escape;var n=function(e){if(0==arguments.length)throw new TypeError("`CSS.escape` requires an argument.");for(var n,t=String(e),r=t.length,o=-1,i="",a=t.charCodeAt(0);++o<r;)0!=(n=t.charCodeAt(o))?i+=n>=1&&n<=31||127==n||0==o&&n>=48&&n<=57||1==o&&n>=48&&n<=57&&45==a?"\\"+n.toString(16)+" ":0==o&&1==r&&45==n||!(n>=128||45==n||95==n||n>=48&&n<=57||n>=65&&n<=90||n>=97&&n<=122)?"\\"+t.charAt(o):t.charAt(o):i+="�";return i};return e.CSS||(e.CSS={}),e.CSS.escape=n,n},Qi.exports=Bi(Fi);var Xi,Yi=Tf(Qi.exports),Ki=":eq(",Wi=/:eq\((\d+)\)/g,$i=function(e){return-1===e.indexOf(Ki)},Zi=function(e){return e.split(Wi).filter(Qe)},ea=/(#|\.)(-?\w+)/g,na=function(e,n,t){return""+n+Yi(t)},ta=function(e){return e.replace(ea,na)},ra=function(e){for(var n=[],t=ta(e.trim()),r=Zi(t),o=r.length,i=0;i<o;){var a=r[i],c=r[i+1];c?n.push({sel:a,eq:Number(c)}):n.push({sel:a}),i+=2}return n},oa=function(e){var n=document;if($i(e))return re(e,n);for(var t=ra(e),r=t.length,o=[],i=n,a=0;a<r;){var c=t[a],u=c.sel,s=c.eq,d=re(u,i),l=d.length;if(0===l)break;if(null!=s&&s>l-1)break;if(a<r-1)if(null==s)i=Hf(d,1)[0];else i=d[s];a===r-1&&(o=null==s?d:[d[s]]),a+=1}return o},ia=function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).getElementById(e)},aa=function(e,n,t){e.setAttribute(n,t)},ca=function(e,n){return e.getAttribute(n)},ua=function(e,n){e.removeAttribute(n)},sa=function(e,n,t,r){var o;o=r?n+":"+t+" !"+r+";":n+":"+t+";",e.style.cssText+=";"+o},da=function(e){return e.parentNode},la=function(e){return e.nextElementSibling},fa=function(e,n){if(e){var t=da(e);t&&t.insertBefore(n,la(e))}},pa=function(e,n){if(e){var t=da(e);t&&t.insertBefore(n,e)}},ga=function(e){var n=e.children;return n?X(n):[]},ma=function(e){var n=e.childNodes;return n?X(n):[]},va=function(e){return e.firstElementChild},ha=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;if(void 0===Xi){var n=e.querySelector("[nonce]");Xi=n&&(n.nonce||n.getAttribute("nonce"))}return Xi},ya="src",ba=function(e){return e.tagName===F},wa=function(e){return L(F,{src:e})},Ea=function(e){re(F,e).forEach((function(e){var n=ca(e,ya);n&&wa(n)}))},Ca=function(e,n){return e.tagName===n},Ia=function(e){return Ca(e,H)&&!ca(e,ya)},ka=function(e){var n=re(H,e),t=n.length,r=ha();if(r)for(var o=0;o<t;o+=1){var i=n[o];Ia(i)&&(i.nonce=r)}},Sa=setTimeout;op.prototype.catch=function(e){return this.then(null,e)},op.prototype.then=function(e,n){var t=new this.constructor(tp);return ip(this,new sp(e,n,t)),t},op.prototype.finally=ep,op.all=function(e){return new op((function(n,t){if(!np(e))return t(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(e);if(0===r.length)return n([]);var o=r.length;function i(e,a){try{if(a&&("object"===Jf(a)||"function"==typeof a)){var c=a.then;if("function"==typeof c)return void c.call(a,(function(n){i(e,n)}),t)}r[e]=a,0==--o&&n(r)}catch(e){t(e)}}for(var a=0;a<r.length;a++)i(a,r[a])}))},op.resolve=function(e){return e&&"object"===Jf(e)&&e.constructor===op?e:new op((function(n){n(e)}))},op.reject=function(e){return new op((function(n,t){t(e)}))},op.race=function(e){return new op((function(n,t){if(!np(e))return t(new TypeError("Promise.race accepts an array"));for(var r=0,o=e.length;r<o;r++)op.resolve(e[r]).then(n,t)}))},op._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){Sa(e,0)},op._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var Ta=Df(Object.freeze({__proto__:null,default:op})),Da="undefined"!=typeof window&&window.Promise||void 0!==l&&l.Promise||Ta.default||Ta,Pa=function(e,n){return new Da((function(t,r){n.onload=function(){t(n)},n.onerror=function(){r(new Error("Failed to load script "+e))}}))},Oa=Tf((function(e){var n=document.createElement("script");n.src=e,n.async=!0;var t=Pa(e,n);return document.getElementsByTagName("head")[0].appendChild(n),t})),Ra=function(e,n){return!!e&&e.tagName===n},Aa=function(e){return Ra(e,V)&&!ca(e,ya)},Na=function(e){return Ra(e,V)&&ca(e,ya)},xa=function(e){for(var n=re(V,e),t=[],r=n.length,o=ha(),i=Uf({},o&&{nonce:o}),a=0;a<r;a+=1){var c=n[a];if(Aa(c)){var u=c.textContent;u&&t.push(L(V,i,{textContent:u}))}}return t},Ma=function(e){for(var n=re(V,e),t=[],r=n.length,o=0;o<r;o+=1){var i=n[o];if(Na(i)){var a=ca(i,ya);a&&t.push(a)}}return t},_a=function(e,n){n.forEach((function(n){e.appendChild(n),e.removeChild(n)}))},qa=function(e){return Promise.all(e.map(Oa))},La=function(e,n,t){var r=Ji(n);ka(r);var o=ma(r),i=xa(r),a=Ma(r);return Ea(r),o.forEach((function(n){_(e,n)})),t(e),_a(e,i),qa(a)},ja=function(e){ma(e).forEach(we)},Ua=function(e,n,t){return ja(e),La(e,n,t)},Fa=function(e,n,t){var r=Ji(n);ka(r);var o=ma(r),i=xa(r),a=Ma(r),c=o.length-1;for(Ea(r);c>=0;){var u=o[c];t(u);var s=va(e);s?pa(s,u):_(e,u),c-=1}return _a(e,i),qa(a)},Ba="alloy-prehiding",Ha="{ visibility: hidden }",Va={},za=function(e){if(!Va[e]){var n=ha(),t=Uf({},n&&{nonce:n}),r=L(H,t,{textContent:e+" "+Ha});_(document.head,r),Va[e]=r}},Ga=function(e){var n=Va[e];n&&(we(n),delete Va[e])},Ja=function(e){if(e&&!ia(Ba)){var n=ha(),t=Uf({id:Ba},n&&{nonce:n}),r=L(H,t,{textContent:e});_(document.head,r)}},Qa=function(){var e=ia(Ba);e&&we(e)},Xa=function(e,n,t){t(e),e.textContent=n},Ya=function(e,n,t){var r=Ji(n);ka(r);var o=ma(r),i=xa(r),a=Ma(r);return Ea(r),o.forEach((function(n){t(n),pa(e,n)})),_a(e,i),qa(a)},Ka=function(e,n,t){return Ya(e,n,t).then((function(){we(e)}))},Wa=function(e,n,t){var r=Ji(n);ka(r);var o=ma(r),i=xa(r),a=Ma(r);Ea(r);var c=e;return o.forEach((function(e){t(e),fa(c,e),c=e})),_a(e,i),qa(a)},$a=["priority"],Za=function(e,n,t){var r=n.priority,o=Ff(n,$a);Object.keys(o).forEach((function(n){sa(e,n,o[n],r)})),t(e)},ec=function(e,n,t){Object.keys(n).forEach((function(t){aa(e,t,n[t])})),t(e)},nc=function(e,n,t){ba(e)&&(wa(n),t(e),ua(e,ya),aa(e,ya,n))},tc=function(e,n,t){var r=n.from,o=n.to,i=ga(e),a=i[r],c=i[o];a&&c&&(r<o?fa(c,a):pa(c,a),t(c),t(a))},rc=function(e,n,t,r){var o=e.map((function(e){return r(e,n,t)}));return Promise.all(o)},oc=function(e){return function(n,t){var r=n.selector,o=n.prehidingSelector,i=n.content;return za(o),ye(r,oa).then((function(n){return rc(n,i,t,e)})).then((function(){Ga(o)}),(function(e){throw Ga(o),e}))}},ic=function(e,n,t){t(e)},ac="setHtml",cc="customCode",uc="setText",sc="setAttribute",dc="setImageSource",lc="setStyle",fc="move",pc="resize",gc="rearrange",mc="remove",vc="insertAfter",hc="insertBefore",yc="replaceHtml",bc="prependHtml",wc="appendHtml",Ec="click",Cc="collectInteractions",Ic=function(){var e;return xf(xf(xf(xf(xf(xf(xf(xf(xf(xf(e={},ac,oc(Ua)),cc,oc(Fa)),uc,oc(Xa)),sc,oc(ec)),dc,oc(nc)),lc,oc(Za)),fc,oc(Za)),pc,oc(Za)),gc,oc(tc)),mc,oc(we)),xf(xf(xf(xf(xf(xf(e,vc,oc(Wa)),hc,oc(Ya)),yc,oc(Ka)),bc,oc(Fa)),wc,oc(La)),Cc,oc(ic))},kc=function(e){var n=e.eventManager,t=e.mergeDecisionsMeta;return function(e){var r=e.decisionsMeta,o=void 0===r?[]:r,i=e.propositionAction,a=e.documentMayUnload,c=void 0!==a&&a,u=e.eventType,s=void 0===u?xi:u,d=e.propositionEventTypes,l=void 0===d?[Hi(s)]:d,f=e.viewName,p=n.createEvent(),g={eventType:s};return f&&(g.web={webPageDetails:{viewName:f}}),Q(o)&&t(p,o,l,i),p.mergeXdm(g),c&&p.documentMayUnload(),n.sendEvent(p)}},Sc="personalization:decisions",Tc=function(e){var n=e.prehidingStyle,t=e.showContainers,r=e.hideContainers,o=e.mergeQuery,i=e.processPropositions,a=e.createProposition,c=e.notificationHandler,u=e.consent;return function(e){var s=e.cacheUpdate,d=e.personalizationDetails,l=e.event,f=e.onResponse,p=u.current(),g=p.state,m=p.wasSet;"out"===g&&m||(d.isRenderDecisions()?r(n):t()),o(l,d.createQueryDetails());var v=c(d.isRenderDecisions(),d.isSendDisplayEvent(),d.getViewName());f((function(e){var n,r,o,c=e.response.getPayloadsByType(Sc).map((function(e){return a(e)})),u=Me(c,(function(e){return e.getScopeType()})),l=u.page,f=void 0===l?[]:l,p=u.view,g=void 0===p?[]:p,m=u.proposition,h=void 0===m?[]:m,y=s.update(g);if(d.isRenderDecisions()){var b=i([].concat(Vf(f),Vf(y)),h);n=b.render,r=b.returnedPropositions,o=b.returnedDecisions,n().then(v),t()}else{var w=i([],[].concat(Vf(f),Vf(y),Vf(h)));r=w.returnedPropositions,o=w.returnedDecisions}return{propositions:r,decisions:o}}))}},Dc=function(e,n){if($i(e))return be(e,n);for(var t=oa(e),r=!1,o=0;o<t.length;o+=1)if(t[o]===n){r=!0;break}return r},Pc="view",Oc="page",Rc="proposition",Ac=["trackingLabel","scopeType"],Nc=function(e){return e.map((function(e){return e.trackingLabel,e.scopeType,Ff(e,Ac)}))},xc=function(e){return e.filter((function(n,t){var r=JSON.stringify(n);return t===e.findIndex((function(e){return JSON.stringify(e)===r}))}))},Mc=function(e,n,t){for(var r=document.documentElement,o=e,i=0;o&&o!==r;){if(Dc(n,o)){var a=t(n),c={metas:a},u=a.find((function(e){return e.trackingLabel}));u&&(c.label=u.trackingLabel,c.weight=i);var s=a.find((function(e){return e.scopeType===Pc}));return s&&(c.viewName=s.scope,c.weight=i),c}o=o.parentNode,i+=1}return{metas:null}},_c=function(e,n,t){for(var r,o=[],i="",a=Number.MAX_SAFE_INTEGER,c=Number.MAX_SAFE_INTEGER,u=0;u<n.length;u+=1){var s=Mc(e,n[u],t),d=s.metas,l=s.label,f=s.weight,p=s.viewName;d&&(l&&f<=a&&(i=l,a=f),p&&f<=c&&(r=p,c=f),o.push.apply(o,Vf(Nc(d))))}return{decisionsMeta:xc(o),propositionActionLabel:i,propositionActionToken:void 0,viewName:r}},qc=function(){return-1!==(arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).location.href.indexOf("adobe_authoring_enabled")},Lc=function(e,n,t,r){if(0!==n.length){var o={};t.forEach((function(e){o[e]=Li}));var i={_experience:{decisioning:{propositions:n,propositionEventType:o}}};r&&(i._experience.decisioning.propositionAction=r),e.mergeXdm(i)}},jc=function(e,n){e.mergeQuery({personalization:Uf({},n)})},Uc=function(e,n){if(n||e){var t={};return e&&(t.label=e),n&&(t.tokens=[n]),t}},Fc=function(e){var n=e.mergeDecisionsMeta,t=e.collectInteractions,r=e.collectClicks,o=e.getInteractionMetas,i=e.getClickMetas,a=e.getClickSelectors,c=e.autoCollectPropositionInteractions;return function(e){var u,s,d,l=e.event,f=e.clickedElement,p=[];if([t(f,o,c),r(f,a(),i)].forEach((function(e){var n=e.decisionsMeta,t=e.propositionActionLabel,r=e.propositionActionToken,o=e.viewName;Array.prototype.push.apply(p,n),!u&&t&&(u=t),!s&&r&&(s=r),!d&&o&&(d=o)})),Q(p)){var g={eventType:Mi};d&&(g.web={webPageDetails:{viewName:d}}),l.mergeXdm(g),n(l,p,[ji.INTERACT],Uc(u,s))}}},Bc=function(e){var n=e.createProposition,t=!1,r=Promise.resolve({}),o=function(e,t){var r=e[t.toLowerCase()];return r&&r.length>0?r:[n({scope:t,scopeDetails:{characteristics:{scopeType:Pc}},items:[{schema:wi}]},!1)]};return{createCacheUpdate:function(e){var n=O();return t=!0,r=r.then((function(e){return n.promise.then((function(n){return v({},e,n)})).catch((function(){return e}))})),{update:function(t){var r=t.filter((function(e){return e.getScope()})),i=Me(r,(function(e){return e.getScope().toLowerCase()}));return n.resolve(i),e?o(i,e):[]},cancel:function(){n.reject()}}},getView:function(e){return r.then((function(n){return o(n,e)}))},isInitialized:function(){return t}}},Hc=function(e){var n=e.processPropositions,t=e.viewCache;return function(e){var r,o,i=e.personalizationDetails,a=e.onResponse,c=i.getViewName();return a((function(){return{propositions:r,decisions:o}})),t.getView(c).then((function(e){var t;if(i.isRenderDecisions()){var a=n(e);return t=a.render,r=a.returnedPropositions,o=a.returnedDecisions,t()}var c=n([],e);return r=c.returnedPropositions,o=c.returnedDecisions,[]}))}},Vc=function(e){return Object.keys(e).map((function(n){return Uf({id:n},e[n])}))},zc=function(){var e={};return{storeClickMeta:function(n){var t=n.selector,r=n.meta,o=r.id,i=r.scope,a=r.scopeDetails,c=r.trackingLabel,u=r.scopeType;e[t]||(e[t]={}),e[t][o]={scope:i,scopeDetails:a,trackingLabel:c,scopeType:u}},getClickSelectors:function(){return Object.keys(e)},getClickMetas:function(n){return e[n]?Vc(e[n]):{}}}},Gc=function(){var e={},n={};return{storeInteractionMeta:function(t,r,o,i,a){a=parseInt(a,10),e[a]||(e[a]={},n[a]={}),n[a][t]||(n[a][t]=new Set),n[a][t].add(r),e[a][t]=Uf(Uf({},i),{},{scopeType:o})},getInteractionMetas:function(t){return Array.isArray(t)&&0!==t.length?Object.values(t.map((function(e){return parseInt(e,10)})).reduce((function(t,r){return Object.keys(e[r]||{}).forEach((function(o){t[o]||(t[o]={proposition:e[r][o],items:new Set}),t[o].items=new Set([].concat(Vf(t[o].items),Vf(n[r][o])))})),t}),{})).map((function(e){var n=e.proposition,t=e.items;return Uf(Uf({},n),{},{items:Array.from(t).map((function(e){return{id:e}}))})})):[]}}},Jc=function(e,n){return e===Ii&&n===Cc},Qc=xf(xf(xf(xf({},Ei,(function(){return!0})),Ci,(function(){return!0})),Ii,Jc),Ti,(function(){return!0})),Xc=function(e,n){return"function"==typeof Qc[e]&&Qc[e](e,n)},Yc=function(e){var n=e.processPropositions,t=e.createProposition,r=e.renderedPropositions,o=e.viewCache,i=function(e){var n=e.items,t=e.metadataForScope,r=void 0===t?{}:t,o=r.actionType,i=r.selector;return n.filter((function(e){return Xc(e.schema,o)})).map((function(e){var n=e.schema;return n===Ci||Jc(n,o)?ke(r)?void 0:Uf(Uf({},e),{},{schema:Jc(n,o)?Ei:n,data:Uf(Uf({},e.data),{},{selector:i,type:o})}):Uf({},e)})).filter((function(e){return e}))},a=function(e){return!(e.scope===bi&&e.renderAttempted)},c=function(e){var n=e.propositions,t=e.metadata;return n.filter(a).map((function(e){return Q(e.items)?{id:e.id,scope:e.scope,scopeDetails:e.scopeDetails,items:i({items:e.items,metadataForScope:t[e.scope]})}:e})).filter((function(e){return Q(e.items)}))};return function(e){var i=e.propositions,a=void 0===i?[]:i,u=e.metadata,s=void 0===u?{}:u,d=e.viewName,l=O();r.concat(l.promise);var f=c({propositions:a,metadata:s}).map((function(e){return t(e)}));return Promise.resolve().then((function(){return d?o.getView(d):[]})).then((function(e){var t=n([].concat(Vf(f),Vf(e))),r=t.render,o=t.returnedPropositions;return r().then(l.resolve),{propositions:o}}))}},Kc=function(e){var n=e.window;return function(){return n.location}},Wc=function(e){return e.targetMigrationEnabled?function(e){e.getPayload().mergeMeta({target:{migration:!0}})}:Ye},$c="BODY > *:eq(0)",Zc=function(e){var n=e.selector;return e.type!==cc||n!==$c?e:v({},e,{selector:"BODY"})},eu=function(e){return!Je(e)||!e.trim()},nu="SCRIPT,LINK,STYLE",tu=function(e){var n=Ji(e);return re(nu,n).map((function(e){return e.outerHTML})).join("")},ru=function(e){var n=v({},e),t=n.content,r=n.selector;if(eu(t))return n;if(null==r)return n;var o=oa(r);return Ra(o[0],z)?(n.type=wc,n.content=tu(t),n):n},ou=function(e){return function(n){return n?e.reduce((function(e,n){return v(e,n(e))}),n):n}},iu=function(e){var n=e.preprocess,t=e.isPageWideSurface,r=function(e,t){var r=e.id,o=e.schema,i=e.data,a=e.characteristics,c=(void 0===a?{}:a).trackingLabel,u=i?i.type:void 0,s=n(i);return{getId:function(){return r},getSchema:function(){return o},getSchemaType:function(){return u},getData:function(){return s},getProposition:function(){return t},getTrackingLabel:function(){return c},getOriginalItem:function(){return e},toString:function(){return JSON.stringify(e)},toJSON:function(){return e}}};return function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=e.id,i=e.scope,a=e.scopeDetails,c=e.items,u=void 0===c?[]:c,s=(a||{}).characteristics,d=(void 0===s?{}:s).scopeType;return{getScope:function(){return i||i},getScopeType:function(){return i===bi||t(i)?Oc:d===Pc?Pc:Rc},getItems:function(){var e=this;return u.map((function(n){return r(n,e)}))},getNotification:function(){return{id:o,scope:i,scopeDetails:a}},getId:function(){return o},toJSON:function(){return e},addToReturnValues:function(t,r,o,i){n&&(t.push(Uf(Uf({},e),{},{items:o.map((function(e){return e.getOriginalItem()})),renderAttempted:i})),i||r.push(Uf(Uf({},e),{},{items:o.map((function(e){return e.getOriginalItem()}))})))}}}},au=function(){var e=Promise.resolve([]);return{concat:function(n){e=e.then((function(e){return n.then((function(n){return e.concat(n)})).catch((function(){return e}))}))},clear:function(){var n=e;return e=Promise.resolve([]),n}}},cu=function(){return{setRenderAttempted:!0,includeInNotification:!0}},uu="always",su="never",du="decoratedElementsOnly",lu=[uu,su,du],fu="data-aep-interact-id",pu="data-aep-click-label",gu="data-aep-click-token",mu=0,vu=function(e,n){return n?parseInt(n,10):++mu},hu=function(e,n){return!!e&&(!!e[n]&&u([uu,du],e[n]))},yu=function(e,n,t,r,o,i,a,c){var u=a.scopeDetails,s=(void 0===u?{}:u).decisionProvider;return hu(e,s)||n===Ec?function(e){if(e.tagName){var n=vu(t,ca(e,fu));c(t,r,i,a,n),aa(e,fu,n),o&&!ca(e,pu)&&aa(e,pu,o)}}:Ye},bu=function(e){var n=e.modules,t=e.logger,r=e.storeInteractionMeta,o=e.storeClickMeta,i=e.autoCollectPropositionInteractions;return function(e){var a=e.getData()||{},c=a.type,u=a.selector;if(!c)return t.warn("Invalid DOM action data: missing type.",e.getData()),{setRenderAttempted:!1,includeInNotification:!1};if(c===Ec)return u?(o({selector:u,meta:Uf(Uf({},e.getProposition().getNotification()),{},{trackingLabel:e.getTrackingLabel(),scopeType:e.getProposition().getScopeType()})}),{setRenderAttempted:!0,includeInNotification:!1}):(t.warn("Invalid DOM action data: missing selector.",e.getData()),{setRenderAttempted:!1,includeInNotification:!1});if(!n[c])return t.warn("Invalid DOM action data: unknown type.",e.getData()),{setRenderAttempted:!1,includeInNotification:!1};var s=yu(i,c,e.getProposition().getId(),e.getId(),e.getTrackingLabel(),e.getProposition().getScopeType(),e.getProposition().getNotification(),r);return{render:function(){return n[c](e.getData(),s)},setRenderAttempted:!0,includeInNotification:!0}}},wu=function(e){var n=e.modules,t=e.logger,r=e.storeInteractionMeta,o=e.autoCollectPropositionInteractions;return function(e){var i=e.getData()||{},a=i.type;if(!i.selector||!a)return{setRenderAttempted:!1,includeInNotification:!1};if(!n[a])return t.warn("Invalid HTML content data",e.getData()),{setRenderAttempted:!1,includeInNotification:!1};var c=yu(o,a,e.getProposition().getId(),e.getId(),e.getTrackingLabel(),e.getProposition().getScopeType(),e.getProposition().getNotification(),r);return{render:function(){return n[a](e.getData(),c)},setRenderAttempted:!0,includeInNotification:!0}}},Eu=function(e){var n=e.logger,t=e.executeRedirect,r=e.collect;return function(e){var o=(e.getData()||{}).content;return o?{render:function(){return r({decisionsMeta:[e.getProposition().getNotification()],documentMayUnload:!0}).then((function(){return t(o)}))},setRenderAttempted:!0,onlyRenderThis:!0}:(n.warn("Invalid Redirect data",e.getData()),{})}},Cu=function(e){var n=e.schemaProcessors,t=e.logger,r=function(e,n){return function(){return Promise.resolve().then(e).then((function(){return t.enabled&&t.info("Action "+n.toString()+" executed."),!0})).catch((function(e){if(t.enabled){var r=e.message,o=e.stack,i="Failed to execute action "+n.toString()+". "+r+" "+o;t.warn(i)}return!1}))}},o=function(e,n){return Promise.all(e.map((function(e){return e()}))).then((function(e){if(e.includes(!0))return n}))},i=function(e){var t=n[e.getSchema()];return t?t(e):{}},a=function(e){for(var n,t,a,c,u=e.renderers,s=e.returnedPropositions,d=e.returnedDecisions,l=e.items,f=e.proposition,p=Vf(u),g=Vf(s),m=Vf(d),v=[],h=[],y=[],b=!1,w=!1,E=0;l.length>E;){c=l[E];var C=i(c);if(n=C.render,t=C.setRenderAttempted,a=C.includeInNotification,w=C.onlyRenderThis){g=[],m=[],t?(v=[c],h=[]):(v=[],h=[c]),p=[],y=[n],b=a;break}n&&y.push(r(n,c)),a&&(b=!0),t?v.push(c):h.push(c),E+=1}if(y.length>0){var I=b?f.getNotification():void 0;p.push((function(){return o(y,I)}))}else b&&p.push((function(){return Promise.resolve(f.getNotification())}));return v.length>0&&f.addToReturnValues(g,m,v,!0),h.length>0&&f.addToReturnValues(g,m,h,!1),{renderers:p,returnedPropositions:g,returnedDecisions:m,onlyRenderThis:w}};return function(e){for(var n,t,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=[],c=[],u=[],s=0;e.length>s;){r=(t=e[s]).getItems();var d=a({renderers:i,returnedPropositions:c,returnedDecisions:u,items:r,proposition:t});if(i=d.renderers,c=d.returnedPropositions,u=d.returnedDecisions,n=d.onlyRenderThis)break;s+=1}return n&&e.forEach((function(e,n){n!==s&&e.addToReturnValues(c,u,e.getItems(),!1)})),o.forEach((function(e){e.addToReturnValues(c,u,e.getItems(),!1)})),{returnedPropositions:c,returnedDecisions:u,render:function(){return Promise.all(i.map((function(e){return e()}))).then((function(e){return e.filter((function(e){return e}))}))}}}},Iu=function(e){var n=e.processPropositions,t=e.createProposition,r=e.notificationHandler;return function(e){var o=e.renderDecisions,i=e.propositions,a=e.event,c=e.personalization,u=void 0===c?{}:c;if(!o)return Promise.resolve();var s=u.sendDisplayEvent,d=void 0===s||s,l=a?a.getViewName():void 0,f=i.map((function(e){return t(e,!0)})),p=n(f),g=p.render,m=p.returnedPropositions,v=r(o,d,l);return g().then(v),Promise.resolve({propositions:m})}},ku="text/html",Su="application/json",Tu="defaultContent",Du=["content","contentType"],Pu=["mobileParameters","webParameters","html"],Ou=function(e,n){for(var t=0;t<Du.length;t+=1){var r=Du[t];if(!Object.prototype.hasOwnProperty.call(e,r))return n.warn("Invalid in-app message data: missing property '"+r+"'.",e),!1}var o=e.content;if(e.contentType===Su)for(var i=0;i<Pu.length;i+=1){var a=Pu[i];if(!Object.prototype.hasOwnProperty.call(o,a))return n.warn("Invalid in-app message data.content: missing property '"+a+"'.",e),!1}return!0},Ru=function(e){var n=e.modules,t=e.logger;return function(e){var r=e.getData(),o=Uf({},e.getProposition().getNotification());if(!r)return t.warn("Invalid in-app message data: undefined.",r),{};var i=r.type,a=void 0===i?Tu:i;return n[a]?Ou(r,t)?o?{render:function(){return n[a](Uf(Uf({},r),{},{meta:o}))},setRenderAttempted:!0,includeInNotification:!0}:(t.warn("Invalid in-app message meta: undefined.",o),{}):{}:(t.warn("Invalid in-app message data: unknown type.",r),{})}},Au=function(e){var n=re("#"+e,document);n&&n.length>0&&we(n[0])},Nu=function(e){var n={};if(!e||"a"!==e.tagName.toLowerCase())return n;var t=e.href;if(!t||!W(t,"adbinapp://"))return n;var r,o,i=t.split("?"),a=i[0].split("://")[1],c=e.innerText,u=e.getAttribute("data-uuid")||"";if(Q(i)){var s=dn.parse(i[1]);r=s.interaction||"",o=decodeURIComponent(s.link||"")}return{action:a,interaction:r,link:o,label:c,uuid:u}},xu=function(e){return function(n){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?e.location.href=n:e.location.replace(n),new Promise((function(){}))}},Mu="alloy-messaging-container",_u="alloy-overlay-container",qu="alloy-content-iframe",Lu=function(){return[Mu,_u].forEach(Au)},ju=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xu(window);return function(t){t.preventDefault(),t.stopImmediatePropagation();var r=t.target,o="a"===r.tagName.toLowerCase()?r:r.closest("a");if(o){var i=Nu(o),a=i.action,c=i.interaction,u=i.link,s=i.label,d=i.uuid;e(a,{label:s,id:c,uuid:d,link:u}),"dismiss"===a&&Lu(),Qe(u)&&u.length>0&&n(u,!0)}}},Uu=function(e,n){var t=(new DOMParser).parseFromString(e,ku),r=t.querySelector("script");r&&r.setAttribute("nonce",ha());var o=L("iframe",{src:URL.createObjectURL(new Blob([t.documentElement.outerHTML],{type:"text/html"})),id:qu});return o.addEventListener("load",(function(){(0,(o.contentDocument||o.contentWindow.document).addEventListener)("click",n)})),o},Fu=function(e,n,t,r){[{id:_u,element:r},{id:Mu,element:t},{id:qu,element:e}].forEach((function(e){var t=e.id,r=e.element,o=n[t],i=o.style,a=void 0===i?{}:i,c=o.params,u=void 0===c?{}:c;v(r.style,a);var s=u.parentElement,d=void 0===s?"body":s,l=u.insertionMethod,f=void 0===l?"appendChild":l,p=u.enabled,g=void 0===p||p,m=document.querySelector(d);g&&m&&"function"==typeof m[f]&&m[f](r)}))},Bu=function(e){var n=e.verticalAlign,t=e.width,r=e.horizontalAlign,o=e.backdropColor,i=e.height,a=e.cornerRadius,c=e.horizontalInset,u=e.verticalInset,s=e.uiTakeover,d={width:t?t+"%":"100%",backgroundColor:o||"rgba(0, 0, 0, 0.5)",borderRadius:a?a+"px":"0px",border:"none",position:void 0!==s&&s?"fixed":"relative",overflow:"hidden"};return"left"===r?d.left=c?c+"%":"0":"right"===r?d.right=c?c+"%":"0":"center"===r&&(d.left="50%",d.transform="translateX(-50%)"),"top"===n?d.top=u?u+"%":"0":"bottom"===n?(d.position="fixed",d.bottom=u?u+"%":"0"):"center"===n&&(d.top="50%",d.transform=("center"===r?d.transform+" ":"")+"translateY(-50%)",d.display="flex",d.alignItems="center",d.justifyContent="center"),d.height=i?i+"vh":"100%",d},Hu=function(e){return{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",background:"transparent",opacity:e.backdropOpacity||.5,backgroundColor:e.backdropColor||"#FFFFFF"}},Vu=["enabled","parentElement","insertionMethod"],zu=function(e){if(!e)return!1;var n=Object.keys(e);if(!u(n,Mu))return!1;if(!u(n,_u))return!1;for(var t=qt(e),r=0;r<t.length;r+=1){if(!At(t[r],"style"))return!1;if(!At(t[r],"params"))return!1;for(var o=0;o<Vu.length;o+=1)if(!At(t[r].params,Vu[o]))return!1}return!0},Gu=function(e){if(e){var n=e.uiTakeover,t=void 0!==n&&n;return xf(xf(xf({},qu,{style:{border:"none",width:"100%",height:"100%"},params:{enabled:!0,parentElement:"#alloy-messaging-container",insertionMethod:"appendChild"}}),Mu,{style:Bu(e),params:{enabled:!0,parentElement:"body",insertionMethod:"appendChild"}}),_u,{style:Hu(e),params:{enabled:!0===t,parentElement:"body",insertionMethod:"appendChild"}})}},Ju=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;Lu();var t=e.content,r=e.contentType,o=e.mobileParameters,i=e.webParameters;if(r===ku){var a=L("div",{id:Mu}),c=Uu(t,ju(n)),u=L("div",{id:_u});zu(i)||(i=Gu(o)),i&&Fu(c,i,a,u)}},Qu=function(e,n){return new Promise((function(t){var r=e.meta;Ju(e,(function(e,t){var o={};o[ji.INTERACT]=Li,-1!==Object.values(ji).indexOf(e)&&(o[e]=Li),n({decisionsMeta:[r],propositionAction:t,eventType:Mi,propositionEventTypes:Object.keys(o)})})),t({meta:r})}))},Xu=function(e){return{defaultContent:function(n){return Qu(n,e)}}},Yu=function(e,n){return function(t,r,o){if(!t)return function(){};if(!r){var i=O();return n.concat(i.promise),i.resolve}return function(n){n.length>0&&e({decisionsMeta:n,viewName:o})}}},Ku=function(e){var n=e.showContainers,t=e.consent;return function(){var e=t.current(),r=e.state,o=e.wasSet;r===Xt&&o?n():t.awaitConsent().catch(n)}},Wu=function(e){for(var n,t,r=document.documentElement,o=e,i=new Set;o&&o!==r;){var a=ca(o,fu);a&&i.add(a),n=n||ca(o,pu),t=t||ca(o,gu),o=o.parentNode}return{interactIds:Vf(i),clickLabel:n,clickToken:t}},$u=function(e){var n=e.find((function(e){return e.scopeType===Pc}));return n?n.scope:void 0},Zu=function(e,n,t){return function(r){var o=r.scopeDetails,i=(void 0===o?{}:o).decisionProvider;return e[i]===uu||e[i]===du&&(n||t)}},es=function(e,n,t){var r=Wu(e),o=r.interactIds,i=r.clickLabel,a=void 0===i?"":i,c=r.clickToken,u=Zu(t,a,c);if(0===o.length)return{};var s=n(o).filter(u);return{decisionsMeta:Nc(s),propositionActionLabel:a,propositionActionToken:c,viewName:$u(s)}},ns="AJO",ts="TGT",rs=function(e){var n=e.config,t=e.logger,r=e.eventManager,o=e.consent,i=n.targetMigrationEnabled,a=n.prehidingStyle,c=n.autoCollectPropositionInteractions,u=kc({eventManager:r,mergeDecisionsMeta:Lc}),s=Gc(),d=s.storeInteractionMeta,l=s.getInteractionMetas,f=zc(),p=f.storeClickMeta,g=f.getClickSelectors,m=f.getClickMetas,v=Kc({window:window}),h=Ic(),y=ou([ru,Zc]),b=iu({preprocess:y,isPageWideSurface:hi}),w=Bc({createProposition:b}),E=xu(window),C=xf(xf(xf(xf(xf({},wi,cu),Ei,bu({modules:h,logger:t,storeInteractionMeta:d,storeClickMeta:p,autoCollectPropositionInteractions:c})),Ci,wu({modules:h,logger:t,storeInteractionMeta:d,autoCollectPropositionInteractions:c})),Si,Eu({logger:t,executeRedirect:E,collect:u})),Ti,Ru({modules:Xu(u),logger:t})),I=Cu({schemaProcessors:C,logger:t}),k=au(),S=Yu(u,k),T=Tc({prehidingStyle:a,showContainers:Qa,hideContainers:Ja,mergeQuery:jc,processPropositions:I,createProposition:b,notificationHandler:S,consent:o}),D=Fc({mergeDecisionsMeta:Lc,collectInteractions:es,collectClicks:_c,getInteractionMetas:l,getClickMetas:m,getClickSelectors:g,autoCollectPropositionInteractions:c}),P=Hc({processPropositions:I,viewCache:w}),O=Yc({processPropositions:I,createProposition:b,renderedPropositions:k,viewCache:w}),R=Wc({targetMigrationEnabled:i}),A=Iu({processPropositions:I,createProposition:b,notificationHandler:S}),N=Ku({showContainers:Qa,consent:o});return Gi({getPageLocation:v,logger:t,fetchDataHandler:T,viewChangeHandler:P,onClickHandler:D,isAuthoringModeEnabled:qc,mergeQuery:jc,viewCache:w,showContainers:Qa,applyPropositions:O,setTargetMigration:R,mergeDecisionsMeta:Lc,renderedPropositions:k,onDecisionHandler:A,handleConsentFlicker:N})};rs.namespace="Personalization";var os=lu.map((function(e){return Pt(e)}));rs.configValidators=At({prehidingStyle:Nt().nonEmpty(),targetMigrationEnabled:Tt().default(!1),autoCollectPropositionInteractions:At(xf(xf({},ns,It(os).default(uu)),ts,It(os).default(su))).default(xf(xf({},ns,uu),ts,su)).noUnknownFields()});var is=function(e){return function(n){var t={webPageDetails:{URL:e.location.href||e.location},webReferrer:{URL:e.document.referrer}};I(n,{web:t})}},as=function(e){var n=e.screen.orientation;if(null==n||null==n.type)return null;var t=n.type.split("-");return 0===t.length||"portrait"!==t[0]&&"landscape"!==t[0]?null:t[0]},cs=function(e){if(J(e.matchMedia)){if(e.matchMedia("(orientation: portrait)").matches)return"portrait";if(e.matchMedia("(orientation: landscape)").matches)return"landscape"}return null},us=function(e){return function(n){var t=e.screen,r=t.width,o=t.height,i={},a=mn(o);a>=0&&(i.screenHeight=a);var c=mn(r);c>=0&&(i.screenWidth=c);var u=as(e)||cs(e);u&&(i.screenOrientation=u),Object.keys(i).length>0&&I(n,{device:i})}},ss=function(e){return function(n){var t=e.document.documentElement,r=void 0===t?{}:t,o=r.clientWidth,i=r.clientHeight,a={type:"browser"},c=mn(o);c>=0&&(a.browserDetails={viewportWidth:c});var u=mn(i);u>=0&&(a.browserDetails=a.browserDetails||{},a.browserDetails.viewportHeight=u),I(n,{environment:a})}},ds=function(e){return function(n){var t=e(),r={},o=mn(t.getTimezoneOffset());void 0!==o&&(r.localTimezoneOffset=o),(void 0===o||Math.abs(o)<6e3)&&(r.localTime=vn(t)),I(n,{placeContext:r})}},ls=function(e){return function(n){var t=e().toISOString();I(n,{timestamp:t})}},fs="https://ns.adobe.com/experience/alloy",ps="2.21.1",gs=function(e){I(e,{implementationDetails:{name:fs,version:ps,environment:"browser"}})},ms=function(e,n,t,r){var o=e.context,i=Te(o,(function(e,r){return t[e]?[t[e]]:(n.warn("Invalid context["+r+"]: '"+e+"' is not available."),[])})).concat(r);return{namespace:"Context",lifecycle:{onBeforeEvent:function(e){var t=e.event,r={};return Promise.all(i.map((function(e){return Promise.resolve(e(r,n))}))).then((function(){return t.mergeXdm(r)}))}}}},vs=[["architecture","string"],["bitness","string"],["model","string"],["platformVersion","string"],["wow64","boolean"]],hs=function(e){return void 0!==e.userAgentData},ys=function(e){return hs(e)?function(n,t){try{return e.userAgentData.getHighEntropyValues(vs.map((function(e){return e[0]}))).then((function(e){var t={};vs.forEach((function(n){var r=Hf(n,2),o=r[0],i=r[1];Object.prototype.hasOwnProperty.call(e,o)&&Jf(e[o])===i&&(t[o]=e[o])})),I(n,{environment:{browserDetails:{userAgentClientHints:t}}})}))}catch(e){return t.warn("Unable to collect user-agent client hints. "+e.message),Ye}}:Ye},bs=is(window),ws=us(window),Es=ss(window),Cs=ds((function(){return new Date})),Is=ls((function(){return new Date})),ks={web:bs,device:ws,environment:Es,placeContext:Cs},Ss={highEntropyUserAgentHints:ys(navigator)},Ts=Uf(Uf({},ks),Ss),Ds=[Is,gs],Ps=function(e){var n=e.config,t=e.logger;return ms(n,t,Ts,Ds)};Ps.namespace="Context",Ps.configValidators=At({context:St(Nt()).default(Object.keys(ks))});var Os=function(e){var n=e.storedConsent,t=e.taskQueue,r=e.defaultConsent,o=e.consent,i=e.sendSetConsentRequest,a=e.validateSetConsentOptions,c=e.consentHashStore,u=e.doesIdentityCookieExist,s=xf({},Kt,r),d=n.read(),l=u(),f=void 0!==d[Kt];l&&f||c.clear(),l||(n.clear(),d={}),o.initializeConsent(s,d);var p=function(){if(0===t.length){var e=n.read();void 0!==e[Kt]&&o.setConsent(e)}};return{commands:{setConsent:{optionsValidator:a,run:function(e){var n=e.consent,r=e.identityMap,a=e.edgeConfigOverrides;o.suspend();var u=c.lookup(n);return t.addTask((function(){return u.isNew()?i({consentOptions:n,identityMap:r,edgeConfigOverrides:a}):Promise.resolve()})).then((function(){return u.save()})).finally(p)}}},lifecycle:{onResponse:p,onRequestFailure:p}}},Rs=function e(n){return Array.isArray(n)?n.map((function(n){return e(n)})):"object"===Jf(n)&&null!==n?Object.keys(n).sort().reduce((function(t,r){return t[r]=e(n[r]),t}),{}):n},As=function(e){return P(JSON.stringify(Rs(e)))},Ns=["standard","version"],xs=function(e){return e.standard+"."+e.version},Ms=function(e){var n=e.storage;return{clear:function(){n.clear()},lookup:function(e){var t={},r=function(e){var n=xs(e);e.standard,e.version;var r=Ff(e,Ns);return t[n]||(t[n]=As(r).toString()),t[n]};return{isNew:function(){return e.some((function(e){var t=xs(e),o=n.getItem(t);return null===o||o!==r(e)}))},save:function(){e.forEach((function(e){var t=xs(e);n.setItem(t,r(e))}))}}}}},_s=function(){var e={},n=xo({content:e,addIdentity:function(n,t){e.identityMap=e.identityMap||{},e.identityMap[n]=e.identityMap[n]||[],e.identityMap[n].push(t)},hasIdentity:function(n){return void 0!==(e.identityMap&&e.identityMap[n])}});return n.setConsent=function(n){e.consent=n},n},qs=function(e){var n=e.payload,t=e.datastreamIdOverride;return Ao({payload:n,datastreamIdOverride:t,getAction:function(){return"privacy/set-consent"},getUseSendBeacon:function(){return!1}})},Ls=function(e){var n=e.parseConsentCookie,t=e.orgId,r=e.cookieJar,o=xe(t,qe);return{read:function(){var e=r.get(o);return e?n(e):{}},clear:function(){r.remove(o)}}},js=function(e){var n=e.createConsentRequestPayload,t=e.createConsentRequest,r=e.sendEdgeNetworkRequest,o=e.edgeConfigOverrides;return function(e){var i=e.consentOptions,a=e.identityMap,c=e.edgeConfigOverrides,u=Lo({payload:n(),globalConfigOverrides:o,localConfigOverrides:c});u.payload.setConsent(i),y(a)&&Object.keys(a).forEach((function(e){a[e].forEach((function(n){u.payload.addIdentity(e,n)}))}));var s=t(u);return r({request:s}).then((function(){}))}},Us=function(e){return e.split(";").reduce((function(e,n){var t=Hf(n.split("="),2),r=t[0],o=t[1];return e[r]=o,e}),{})},Fs=At({consent:St(kt()).required().nonEmpty(),identityMap:Mt,edgeConfigOverrides:_t}).noUnknownFields().required(),Bs=function(e){var n=e.config,t=e.consent,r=e.sendEdgeNetworkRequest,o=e.createNamespacedStorage,i=n.orgId,a=n.defaultConsent,c=Ls({parseConsentCookie:Us,orgId:i,cookieJar:E}),u=D(),s=js({createConsentRequestPayload:_s,createConsentRequest:qs,sendEdgeNetworkRequest:r,edgeConfigOverrides:n.edgeConfigOverrides}),d=o(Ne(i)+".consentHashes."),l=Ms({storage:d.persistent}),f=je({orgId:i});return Os({storedConsent:c,taskQueue:u,defaultConsent:a,consent:t,sendSetConsentRequest:s,validateSetConsentOptions:Fs,consentHashStore:l,doesIdentityCookieExist:f})};Bs.namespace="Privacy";var Hs=function(){return{eventMergeId:Zf()}},Vs=function(e){return{commands:{createEventMergeId:{run:e.createEventMergeId}}}},zs=function(){return Vs({createEventMergeId:Hs})};zs.namespace="EventMerge";var Gs=function(e){var n=e.config,t=e.componentRegistry,r=[].concat(Vf(t.getCommandNames()),[sr,dr]).sort(),o=Uf({},n);Object.keys(n).forEach((function(e){var t=n[e];"function"==typeof t&&(o[e]=t.toString())}));var i=t.getComponentNames();return{version:ps,configs:o,commands:r,components:i}},Js=function(e){var n=e.config,t=e.componentRegistry,r=Gs({config:n,componentRegistry:t});return{commands:{getLibraryInfo:{run:function(){return{libraryInfo:r}}}}}};Js.namespace="LibraryInfo";var Qs,Xs="personalization:decisions",Ys=function(e){return null!==e&&"object"===Jf(e)&&Object.getPrototypeOf(e)===Object.prototype},Ks=function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return Object.keys(n).forEach((function(o){Ys(n[o])||Array.isArray(n[o])?e(n[o],t,[].concat(Vf(r),[o])):t[[].concat(Vf(r),[o]).join(".")]=n[o]})),t},Ws=function(e){return Ys(e)?Ks(e):e},$s=function(e){var n=e.renderDecisions,t=e.decisionProvider,r=e.applyResponse,o=e.event,i=e.personalization,a=e.decisionContext,c=Uf(Uf({},Ws(o.getContent())),a);return function(e){var a=e.response;if(t.addPayloads(a.getPayloadsByType(Xs)),!o.hasQuery())return{propositions:[]};var u=t.evaluate(c);return r({renderDecisions:n,propositions:u,event:o,personalization:i})}},Zs={MATCHER:"matcher",GROUP:"group",HISTORICAL:"historical"},ed={EQUALS:"eq",NOT_EQUALS:"ne",EXISTS:"ex",NOT_EXISTS:"nx",GREATER_THAN:"gt",GREATER_THAN_OR_EQUAL_TO:"ge",LESS_THAN:"lt",LESS_THAN_OR_EQUAL_TO:"le",CONTAINS:"co",NOT_CONTAINS:"nc",STARTS_WITH:"sw",ENDS_WITH:"ew"},nd={AND:"and",OR:"or"},td={ANY:"any",ORDERED:"ordered"},rd=(xf(xf(xf(xf(xf(xf(xf(xf(xf(xf(Qs={},ed.EQUALS,fp()),ed.NOT_EQUALS,pp()),ed.EXISTS,gp()),ed.NOT_EXISTS,mp()),ed.GREATER_THAN,hp()),ed.GREATER_THAN_OR_EQUAL_TO,yp()),ed.LESS_THAN,bp()),ed.LESS_THAN_OR_EQUAL_TO,wp()),ed.CONTAINS,Ep()),ed.NOT_CONTAINS,Cp()),xf(xf(Qs,ed.STARTS_WITH,Ip()),ed.ENDS_WITH,kp())),od=["iam.eventType","eventType","type"],id=["iam.id","id"],ad=function(e,n){return function(t){var r=e.getItem(n);if(!r)return t;try{return JSON.parse(r)}catch(e){return t}}},cd=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};return function(r){e.setItem(n,JSON.stringify(t(r)))}},ud=function(e){var n=new Date;return n.setDate(n.getDate()-e),n},sd=function(e){var n=e.scopeDetails,t=(void 0===n?{}:n).activity;return(void 0===t?{}:t).id},dd=function(){var e={};return{getItem:function(n){return n in e?e[n]:null},setItem:function(n,t){e[n]=t}}},ld=function(e){e.clear()},fd=function(e){var n=e.eventType,t=void 0===n?"":n,r=e._experience;return!(!t||""===t)&&!(!r||"object"!==Jf(r))},pd=function(e){var n=e.scopeDetails;return(void 0===n?{}:n).decisionProvider},gd=function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];return Array.isArray(n)?(n.forEach((function(n){Array.isArray(n)?t.push.apply(t,Vf(e(n))):t.push(n)})),t):n},md=function(e,n,t){return{schema:t.schema,data:t.data,id:t.id||e}},vd="schema",hd=xf(xf({},"cjmiam",(function(e,n,t){var r=t.html,o=t.mobileParameters;return{schema:Ti,data:{mobileParameters:o,webParameters:{},content:r,contentType:ku},id:e}})),vd,md),yd=function(){return function(e){var n=e.id,t=e.type,r=e.detail;return"function"==typeof hd[t]?hd[t](n,t,r):r}},bd=function(e){var n=e.schema,t=e.data;if(n===ki)return!0;if(n!==Ii)return!1;try{var r="string"==typeof t.content?JSON.parse(t.content):t.content;return r&&Object.prototype.hasOwnProperty.call(r,"version")&&Object.prototype.hasOwnProperty.call(r,"rules")}catch(e){return!1}},wd=function(e,n,t){var r=yd(),o=sd(e),i=[],a=function(e){var n=e.data,t=void 0===n?{}:n,r=e.schema===ki?t:t.content;r&&i.push(Xp("string"==typeof r?JSON.parse(r):r))},c=function(a){var c=n.getEvent(xi,o),u=c?c.firstTimestamp:void 0,s=gd(i.map((function(e){return e.execute(a)}))).map(r).map((function(e){var n=(t.recordQualified(o)||{}).firstTimestamp;return Uf(Uf({},e),{},{data:Uf(Uf({},e.data),{},{qualifiedDate:n,displayedDate:u})})}));return Uf(Uf({},e),{},{items:s})};return Array.isArray(e.items)&&e.items.filter(bd).forEach(a),{evaluate:c,isEvaluable:i.length>0}},Ed=function(e){var n=e.eventRegistry;return{recordQualified:function(e){if(e)return n.addEvent({},ji.TRIGGER,e)}}},Cd=function(e){var n=e.eventRegistry,t={},r=Ed({eventRegistry:n}),o=function(e){var o=sd(e);if(o){var i=wd(e,n,r);i.isEvaluable&&(t[o]=i)}},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.values(t).map((function(n){return n.evaluate(e)})).filter((function(e){return e.items.length>0}))};return{addPayload:o,addPayloads:function(e){e.forEach(o)},evaluate:i}},Id=function(e){return function(n){var t=n.renderDecisions,r=void 0!==t&&t,o=n.propositions,i=void 0===o?[]:o,a=n.event,c=n.personalization;return i.length>0&&e&&e.onDecision({renderDecisions:r,propositions:i,event:a,personalization:c}),{propositions:i}}},kd="events",Sd=1e3,Td=30,Dd=function(e){return"iam."+e},Pd=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sd,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Td;return function(t){var r={};return Object.keys(t).forEach((function(o){r[o]={},Object.values(t[o]).filter((function(e){return new Date(e.firstTimestamp)>=ud(n)})).sort((function(e,n){return e.firstTimestamp-n.firstTimestamp})).slice(-1*e).forEach((function(e){r[o][e.event[Dd("id")]]=e}))})),r}},Od=function(e){var n,t,r,o=e.storage,i=o,a=function(e){n=ad(i=e,kd),t=cd(i,kd,Pd(Sd,Td)),r=n({})};a(o);var c=function(e,n,o,i){if(n&&o){r[n]||(r[n]={});var a=r[n][o],c=a?a.count:0,u=(new Date).getTime(),s=a?a.firstTimestamp||a.timestamp:u;return r[n][o]={event:Uf(Uf({},e),{},xf(xf(xf({},Dd("id"),o),Dd("eventType"),n),Dd("action"),i)),firstTimestamp:s,timestamp:u,count:c+1},t(r),r[n][o]}};return{addExperienceEdgeEvent:function(e){var n=e.getContent().xdm,t=void 0===n?{}:n,r=t._experience;if(fd(t)){var o=r.decisioning,i=void 0===o?{}:o,a=i.propositionEventType,u=void 0===a?{}:a,s=i.propositionAction,d=void 0===s?{}:s,l=i.propositions,f=void 0===l?[]:l,p=Object.keys(u);if(0!==p.length){var g=function(e){return u[e]===Li},m=d.id;p.filter(g).forEach((function(e){f.forEach((function(n){pd(n)===ns&&c({},e,sd(n),m)}))}))}}},addEvent:c,getEvent:function(e,n){if(r[e])return r[e][n]},toJSON:function(){return r},setStorage:a}},Rd=function(e){var n=e.eventRegistry,t=e.window,r=(new Date).getTime(),o=function(){return Uf({title:t.title,url:t.url},en(t.url))},i=function(){return Uf({url:t.referrer},en(t.referrer))},a=function(){var e=new Date,n=e.getTime();return{pageLoadTimestamp:r,currentTimestamp:n,currentDate:e.getDate(),"~state.com.adobe.module.lifecycle/lifecyclecontextdata.dayofweek":e.getDay()+1,"~state.com.adobe.module.lifecycle/lifecyclecontextdata.hourofday":e.getHours(),currentMinute:e.getMinutes(),currentMonth:e.getMonth(),currentYear:e.getFullYear(),pageVisitDuration:n-r,"~timestampu":n/1e3,"~timestampz":e.toISOString()}},c=function(){return{height:t.height,width:t.width,scrollY:t.scrollY,scrollX:t.scrollX}},u={browser:function(){return{name:Eo(t)}}(),page:o(),referringPage:i()},s=function(){return Uf(Uf(Uf({},u),a()),{},{window:c(),"~sdkver":ps})},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Uf(Uf({},s()),e);return Uf(Uf({},Ws(t)),{},{events:n.toJSON()})};return{getContext:d}},Ad=function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return t},Nd=function(e){return!0},xd=function(){var e=Ad,n=Nd,t=0,r={},o=function(e){return function(){delete r[e]}},i=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return"function"!=typeof e?function(){}:(r[t+=1]={callback:e,params:n},o(t))},a=function(){for(var t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];qt(r).forEach((function(t){var r=t.callback,i=t.params,a=e.apply(void 0,[i].concat(o));n.apply(void 0,[i].concat(Vf(a)))&&r.apply(void 0,Vf(a))}))};return{add:i,emit:a,hasSubscriptions:function(){return Object.keys(r).length>0},setEmissionPreprocessor:function(n){"function"==typeof n&&(e=n)},setEmissionCondition:function(e){"function"==typeof e&&(n=e)}}},Md=function(e){var n=e.options;return At({surfaces:St(Nt()).uniqueItems(),schemas:St(Nt()).uniqueItems(),callback:Dt().required()}).noUnknownFields()(n)},_d=function(e,n){var t=e.surfacesFilter,r=e.schemasFilter;return[{propositions:n.filter((function(e){return!t||u(t,e.scope)})).map((function(e){var n=e.items,t=void 0===n?[]:n;return Uf(Uf({},e),{},{items:t.filter((function(e){return!r||u(r,e.schema)}))})})).filter((function(e){return e.items.length>0}))}]},qd=function(e,n){return n.propositions.length>0},Ld=function(){var e=xd();e.setEmissionPreprocessor(_d),e.setEmissionCondition(qd);var n=function(n){var t=n.surfaces,r=n.schemas,o=n.callback,i=e.add(o,{surfacesFilter:t instanceof Array?t:void 0,schemasFilter:r instanceof Array?r:void 0});return Promise.resolve({unsubscribe:i})};return{refresh:function(n){e.hasSubscriptions()&&e.emit(n)},command:{optionsValidator:function(e){return Md({options:e})},run:n}}},jd={TYPE:"~type",SOURCE:"~source"},Ud={LIFECYCLE:"com.adobe.eventType.lifecycle",TRACK:"com.adobe.eventType.generic.track",EDGE:"com.adobe.eventType.edge",RULES_ENGINE:"com.adobe.eventType.rulesEngine"},Fd={LAUNCH:"com.adobe.eventSource.applicationLaunch",REQUEST:"com.adobe.eventSource.requestContent"},Bd=function(e){var n=e.options;return At({renderDecisions:Tt(),personalization:At({decisionContext:At({})})}).noUnknownFields()(n)},Hd=function(e){var n=e.contextProvider,t=e.decisionProvider;return{optionsValidator:function(e){return Bd({options:e})},run:function(e){var r=e.renderDecisions,o=e.decisionContext;return(0,e.applyResponse)({renderDecisions:r,propositions:t.evaluate(n.getContext(o))})}}},Vd=function(e){var n=e.config,t=e.createNamespacedStorage,r=e.consent,o=n.orgId,i=n.personalizationStorageEnabled,a=t(Ne(o)+".decisioning.");i||ld(a.persistent);var c,u=Od({storage:dd()}),s=Cd({eventRegistry:u}),d=Rd({eventRegistry:u,window:window}),l=Hd({contextProvider:d,decisionProvider:s}),f=Ld();return{lifecycle:{onDecision:function(e){var n=e.propositions;f.refresh(n)},onComponentsRegistered:function(e){c=Id(e.lifecycle),i&&r.awaitConsent().then((function(){u.setStorage(a.persistent)})).catch((function(){a&&ld(a.persistent)}))},onBeforeEvent:function(e){var n=e.event,t=e.renderDecisions,r=e.personalization,o=void 0===r?{}:r,i=e.onResponse,a=void 0===i?Ye:i,l=o.decisionContext,f=void 0===l?{}:l;a($s({renderDecisions:t,decisionProvider:s,applyResponse:c,event:n,personalization:o,decisionContext:d.getContext(Uf(xf(xf({},jd.TYPE,Ud.EDGE),jd.SOURCE,Fd.REQUEST),f))})),u.addExperienceEdgeEvent(n)}},commands:{evaluateRulesets:{run:function(e){var n=e.renderDecisions,t=e.personalization,r=(void 0===t?{}:t).decisionContext,o=void 0===r?{}:r;return l.run({renderDecisions:n,decisionContext:Uf(xf(xf({},jd.TYPE,Ud.RULES_ENGINE),jd.SOURCE,Fd.REQUEST),o),applyResponse:c})},optionsValidator:l.optionsValidator},subscribeRulesetItems:f.command}}};Vd.namespace="DecisioningEngine",Vd.configValidators=At({personalizationStorageEnabled:Tt().default(!1)});var zd=function(e){return{inferences:e.response.getPayloadsByType("rtml:inferences")}},Gd=function(){return{lifecycle:{onResponse:zd},commands:{}}};Gd.namespace="MachineLearning";var Jd={MAIN:"main",AD:"ad",COMPLETED:"completed"},Qd=function(){var e;return{getSession:function(n){return e[n]||{}},storeSession:function(n){var t=n.playerId,r=n.sessionDetails;void 0===e&&(e={}),e[t]=r},stopPing:function(n){var t=n.playerId,r=e[t];r&&(clearTimeout(r.pingId),r.pingId=null,r.playbackState=Jd.COMPLETED)},savePing:function(n){var t=n.playerId,r=n.pingId,o=n.playbackState;e[t]&&(e[t].pingId&&clearTimeout(e[t].pingId),e[t].pingId=r,e[t].playbackState=o)}}},Xd={PAUSE:"media.pauseStart",PLAY:"media.play",BUFFER_START:"media.bufferStart",AD_START:"media.adStart",Ad_BREAK_START:"media.adBreakStart",SESSION_END:"media.sessionEnd",SESSION_START:"media.sessionStart",SESSION_COMPLETE:"media.sessionComplete",PING:"media.ping",AD_BREAK_COMPLETE:"media.adBreakComplete",AD_COMPLETE:"media.adComplete",AD_SKIP:"media.adSkip",BITRATE_CHANGE:"media.bitrateChange",CHAPTER_COMPLETE:"media.chapterComplete",CHAPTER_SKIP:"media.chapterSkip",CHAPTER_START:"media.chapterStart",ERROR:"media.error",STATES_UPDATE:"media.statesUpdate"},Yd=function(e){var n=e.mediaRequestPayload,t=e.action;return Ao({payload:n,edgeSubPath:"/va",getAction:function(){return t},getUseSendBeacon:function(){return!1}})},Kd=function(e){var n=e.config,t=e.eventManager,r=e.consent,o=e.sendEdgeNetworkRequest,i=e.setTimestamp;return{createMediaEvent:function(e){var r=e.options,o=t.createEvent(),a=r.xdm;if(i(a),o.setUserXdm(a),a.eventType===Xd.AD_START){var c=r.xdm.mediaCollection.advertisingDetails;o.mergeXdm({mediaCollection:{advertisingDetails:{playerName:c.playerName||n.streamingMedia.playerName}}})}return o},createMediaSession:function(e){var r=n.streamingMedia,o=r.playerName,i=r.channel,a=r.appVersion,c=t.createEvent(),u=e.xdm.mediaCollection.sessionDetails;return c.setUserXdm(e.xdm),c.mergeXdm({eventType:Xd.SESSION_START,mediaCollection:{sessionDetails:{playerName:u.playerName||o,channel:u.channel||i,appVersion:u.appVersion||a}}}),c},augmentMediaEvent:function(e){var n=e.event,t=e.playerId,r=e.getPlayerDetails,o=e.sessionID;if(!t||!r)return n;var i=r({playerId:t}),a=i.playhead,c=i.qoeDataDetails;return n.mergeXdm({mediaCollection:{playhead:mn(a),qoeDataDetails:c,sessionID:o}}),n},trackMediaSession:function(e){var n=e.event,r=e.mediaOptions;return t.sendEvent(n,{mediaOptions:r})},trackMediaEvent:function(e){var n=e.event,t=e.action,i=_o(),a=Yd({mediaRequestPayload:i,action:t});return i.addEvent(n),n.finalize(),r.awaitConsent().then((function(){return o({request:a}).then((function(){return{}}))}))}}},Wd=function(e,n){return e===Xd.AD_START||e===Xd.Ad_BREAK_START||e===Xd.AD_SKIP||e===Xd.AD_COMPLETE?"ad":e===Xd.AD_BREAK_COMPLETE||e===Xd.CHAPTER_COMPLETE||e===Xd.CHAPTER_START||e===Xd.CHAPTER_SKIP||e===Xd.SESSION_START?"main":e===Xd.SESSION_END||e===Xd.SESSION_COMPLETE?"completed":n},$d=function(e){var n=e.mediaEventManager,t=e.mediaSessionCacheManager,r=e.config,o=function e(o){var i=n.createMediaEvent({options:o}),a=o.playerId,c=o.xdm.eventType,u=c.split(".")[1],s=t.getSession(a),d=s.getPlayerDetails,l=s.sessionPromise,f=s.playbackState;return l.then((function(o){return o.sessionId?(n.augmentMediaEvent({event:i,eventType:c,playerId:a,getPlayerDetails:d,sessionID:o.sessionId}),n.trackMediaEvent({event:i,action:u}).then((function(){if(a)if(c===Xd.SESSION_COMPLETE||c===Xd.SESSION_END)t.stopPing({playerId:a});else{var n=Wd(c,f);if("completed"===n)return;var o="ad"===n?r.streamingMedia.adPingInterval:r.streamingMedia.mainPingInterval,i=setTimeout((function(){var n={playerId:a,xdm:{eventType:Xd.PING}};e(n)}),1e3*o);t.savePing({playerId:a,pingId:i,playbackState:n})}}))):Promise.reject(new Error("Failed to trigger media event: "+c+". Session ID is not available for playerId: "+a+"."))}))};return function(e){return o(e)}},Zd=At({streamingMedia:At({channel:Nt().nonEmpty().required(),playerName:Nt().nonEmpty().required(),appVersion:Nt(),mainPingInterval:Ot().minimum(10).maximum(50).default(10),adPingInterval:Ot().minimum(1).maximum(10).default(10)}).noUnknownFields()}),el=function(e){var n=e.options;return It([At({playerId:Nt().required(),getPlayerDetails:Dt().required(),xdm:At({mediaCollection:At({sessionDetails:At(kt()).required()})})}).required(),At({xdm:At({mediaCollection:At({playhead:Ot().required(),sessionDetails:At(kt()).required()})})}).required()],"Error validating the createMediaSession command options.")(n)},nl=function(e){var n=e.options;return It([At({playerId:Nt().required(),xdm:At({eventType:xt.apply(void 0,Vf(Object.values(Xd))).required(),mediaCollection:At(kt())}).required()}).required(),At({xdm:At({eventType:xt.apply(void 0,Vf(Object.values(Xd))).required(),mediaCollection:At({playhead:Ot().integer().required(),sessionID:Nt().required()}).required()}).required()}).required()],"Error validating the sendMediaEvent command options.")(n)},tl=function(e){var n=e.config,t=e.trackMediaEvent,r=e.trackMediaSession,o=e.mediaResponseHandler;return{lifecycle:{onBeforeEvent:function(e){var n=e.mediaOptions,t=e.onResponse,r=void 0===t?Ye:t;if(n){var i=n.legacy,a=n.playerId,c=n.getPlayerDetails;i||r((function(e){var n=e.response;return o({playerId:a,getPlayerDetails:c,response:n})}))}}},commands:{createMediaSession:{optionsValidator:function(e){return el({options:e})},run:r},sendMediaEvent:{optionsValidator:function(e){return nl({options:e})},run:function(e){return n.streamingMedia?t(e):Promise.reject(new Error("Streaming media is not configured."))}}}}},rl=function(e){var n=e.config,t=e.mediaEventManager,r=e.mediaSessionCacheManager,o=e.legacy,i=void 0!==o&&o;return function(e){if(!n.streamingMedia)return Promise.reject(new Error("Streaming media is not configured."));var o=e.playerId,a=e.getPlayerDetails,c=t.createMediaSession(e);t.augmentMediaEvent({event:c,playerId:o,getPlayerDetails:a});var u=t.trackMediaSession({event:c,mediaOptions:{playerId:o,getPlayerDetails:a,legacy:i}});return r.storeSession({playerId:o,sessionDetails:{sessionPromise:u,getPlayerDetails:a,playbackState:Jd.MAIN}}),u}},ol=function(e){var n=e.mediaSessionCacheManager,t=e.config,r=e.trackMediaEvent;return function(e){var o=e.response,i=e.playerId,a=e.getPlayerDetails,c=o.getPayloadsByType("media-analytics:new-session");if(Q(c)){var u=c[0].sessionId;if(eu(u))return{};if(!i||!a)return{sessionId:u};var s=setTimeout((function(){r({playerId:i,xdm:{eventType:Xd.PING}})}),1e3*t.streamingMedia.mainPingInterval);return n.savePing({playerId:i,pingId:s,playbackState:Jd.MAIN}),{sessionId:u}}return{}}},il=function(e){var n=e.config,t=e.logger,r=e.eventManager,o=e.sendEdgeNetworkRequest,i=e.consent,a=Qd(),c=Kd({config:n,eventManager:r,logger:t,consent:i,sendEdgeNetworkRequest:o,setTimestamp:ls((function(){return new Date}))}),u=$d({mediaSessionCacheManager:a,mediaEventManager:c,config:n}),s=rl({config:n,mediaEventManager:c,mediaSessionCacheManager:a}),d=ol({mediaSessionCacheManager:a,config:n,trackMediaEvent:u});return tl({config:n,trackMediaEvent:u,mediaEventManager:c,mediaResponseHandler:d,trackMediaSession:s})};il.namespace="Streaming media",il.configValidators=Zd;var al={Video:"video",Audio:"audio"},cl={VOD:"vod",Live:"live",Linear:"linear",Podcast:"podcast",Audiobook:"audiobook",AOD:"aod"},ul={FullScreen:"fullScreen",ClosedCaption:"closedCaptioning",Mute:"mute",PictureInPicture:"pictureInPicture",InFocus:"inFocus"},sl={AdBreakStart:"adBreakStart",AdBreakComplete:"adBreakComplete",AdStart:"adStart",AdComplete:"adComplete",AdSkip:"adSkip",ChapterStart:"chapterStart",ChapterComplete:"chapterComplete",ChapterSkip:"chapterSkip",SeekStart:"seekStart",SeekComplete:"seekComplete",BufferStart:"bufferStart",BufferComplete:"bufferComplete",BitrateChange:"bitrateChange",StateStart:"stateStart",StateEnd:"stateEnd"},dl={SessionStart:"sessionStart",SessionEnd:"sessionEnd",SessionComplete:"sessionComplete",Play:"play",Pause:"pauseStart",Error:"error",StateUpdate:"statesUpdate"},ll={MediaResumed:"media.resumed",GranularAdTracking:"media.granularadtracking"},fl={Show:"a.media.show",Season:"a.media.season",Episode:"a.media.episode",AssetId:"a.media.asset",Genre:"a.media.genre",FirstAirDate:"a.media.airDate",FirstDigitalDate:"a.media.digitalDate",Rating:"a.media.rating",Originator:"a.media.originator",Network:"a.media.network",ShowType:"a.media.type",AdLoad:"a.media.adLoad",MVPD:"a.media.pass.mvpd",Authorized:"a.media.pass.auth",DayPart:"a.media.dayPart",Feed:"a.media.feed",StreamFormat:"a.media.format"},pl={Artist:"a.media.artist",Album:"a.media.album",Label:"a.media.label",Author:"a.media.author",Station:"a.media.station",Publisher:"a.media.publisher"},gl={Advertiser:"a.media.ad.advertiser",CampaignId:"a.media.ad.campaign",CreativeId:"a.media.ad.creative",PlacementId:"a.media.ad.placement",SiteId:"a.media.ad.site",CreativeUrl:"a.media.ad.creativeURL"},ml=function(e){var n=e.trackMediaEvent,t=e.trackMediaSession,r=e.mediaResponseHandler,o=e.logger,i=e.createMediaHelper,a=e.createGetInstance,c=e.config;return{lifecycle:{onBeforeEvent:function(e){var n=e.mediaOptions,t=e.onResponse,o=void 0===t?Ye:t;if(n){var i=n.legacy,a=n.playerId,c=n.getPlayerDetails;i&&o((function(e){var n=e.response;return r({playerId:a,getPlayerDetails:c,response:n})}))}}},commands:{getMediaAnalyticsTracker:{run:function(){if(!c.streamingMedia)return Promise.reject(new Error("Streaming media is not configured."));o.info("Streaming media is configured in legacy mode.");var e=i({logger:o});return Promise.resolve(Uf({getInstance:function(){return a({logger:o,trackMediaEvent:n,trackMediaSession:t,uuid:Zf})},Event:sl,MediaType:al,PlayerState:ul,StreamType:cl,MediaObjectKey:ll,VideoMetadataKeys:fl,AudioMetadataKeys:pl,AdMetadataKeys:gl},e))}}}}},vl=function(e){var n=e.logger;return{createMediaObject:function(e,t,r,o,i){var a={friendlyName:e,name:t,length:r,streamType:i,contentType:o},c=At({friendlyName:Nt().nonEmpty(),name:Nt().nonEmpty(),length:Ot().required(),streamType:Nt().nonEmpty(),contentType:Nt().nonEmpty()});try{var u=c(a);return{sessionDetails:{name:u.name,friendlyName:u.friendlyName,length:u.length,streamType:u.streamType,contentType:u.contentType}}}catch(e){return n.warn("An error occurred while creating the Media Object.",e),{}}},createAdBreakObject:function(e,t,r){var o={friendlyName:e,offset:t,index:r},i=At({friendlyName:Nt().nonEmpty(),offset:Ot(),index:Ot()});try{var a=i(o);return{advertisingPodDetails:{friendlyName:a.friendlyName,offset:a.offset,index:a.index}}}catch(e){return n.warn("An error occurred while creating the Ad Break Object.",e),{}}},createAdObject:function(e,t,r,o){var i={friendlyName:e,name:t,podPosition:r,length:o},a=At({friendlyName:Nt().nonEmpty(),name:Nt().nonEmpty(),podPosition:Ot(),length:Ot()});try{var c=a(i);return{advertisingDetails:{friendlyName:c.friendlyName,name:c.name,podPosition:c.podPosition,length:c.length}}}catch(e){return n.warn("An error occurred while creating the Advertising Object.",e),{}}},createChapterObject:function(e,t,r,o){var i={friendlyName:e,offset:t,length:r,index:o},a=At({friendlyName:Nt().nonEmpty(),offset:Ot(),length:Ot(),index:Ot()});try{var c=a(i);return{chapterDetails:{friendlyName:c.friendlyName,offset:c.offset,index:c.index,length:c.length}}}catch(e){return n.warn("An error occurred while creating the Chapter Object.",e),{}}},createStateObject:function(e){var t=/^[a-zA-Z0-9_]{1,64}$/,r=Nt().matches(t,"This is not a valid state name.");try{return{name:r(e)}}catch(e){return n.warn("An error occurred while creating the State Object.",e),{}}},createQoEObject:function(e,t,r,o){var i={bitrate:e,droppedFrames:t,fps:r,startupTime:o},a=At({bitrate:Ot(),droppedFrames:Ot(),fps:Ot(),startupTime:Ot()});try{var c=a(i);return{bitrate:c.bitrate,droppedFrames:c.droppedFrames,framesPerSecond:c.fps,timeToStart:c.startupTime}}catch(e){return n.warn("An error occurred while creating the QOE Object.",e),{}}}}},hl={"a.media.show":"show","a.media.season":"season","a.media.episode":"episode","a.media.asset":"assetID","a.media.genre":"genre","a.media.airDate":"firstAirDate","a.media.digitalDate":"firstDigitalDate","a.media.rating":"rating","a.media.originator":"originator","a.media.network":"network","a.media.type":"showType","a.media.adLoad":"adLoad","a.media.pass.mvpd":"mvpd","a.media.pass.auth":"authorized","a.media.dayPart":"dayPart","a.media.feed":"feed","a.media.format":"streamFormat","a.media.artist":"artist","a.media.album":"album","a.media.label":"label","a.media.author":"author","a.media.station":"station","a.media.publisher":"publisher","media.resumed":"hasResume"},yl={"a.media.ad.advertiser":"advertiser","a.media.ad.campaign":"campaignID","a.media.ad.creative":"creativeID","a.media.ad.placement":"placementID","a.media.ad.site":"siteID","a.media.ad.creativeURL":"creativeURL"},bl=function(e){var n=e.logger,t=e.trackMediaSession,r=e.trackMediaEvent,o=e.uuid,i=null,a=function(){i={qoe:null,lastPlayhead:0,playerId:o()}},c=function(e){var n=e.eventType;return n===sl.BufferComplete||n===sl.SeekComplete?dl.Play:n===sl.StateStart||n===sl.StateEnd?dl.StateUpdate:n===sl.SeekStart?dl.Pause:n},s=function(e){var n=e.eventType,t=e.mediaDetails,r=void 0===t?{}:t,o=e.contextData,i=void 0===o?[]:o,a=c({eventType:n});if(n===sl.StateStart)return{eventType:"media."+a,mediaCollection:{statesStart:[r]}};if(n===sl.StateEnd)return{eventType:"media."+a,mediaCollection:{statesEnd:[r]}};var u={eventType:"media."+a,mediaCollection:Uf({},r)},s=[];return Object.keys(i).forEach((function(e){hl[e]?u.mediaCollection.sessionDetails[hl[e]]=i[e]:yl[e]?u.mediaCollection.advertisingDetails[yl[e]]=i[e]:s.push({name:e,value:i[e]})})),Q(s)&&(u.mediaCollection.customMetadata=s),u};return{trackSessionStart:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(h(e)||ke(e))return n.warn("Invalid media object"),{};null===i&&(n.warn("The Media Session was completed. Restarting a new session."),a());var o=s({eventType:dl.SessionStart,mediaDetails:e,contextData:r});return t({playerId:i.playerId,getPlayerDetails:function(){return{playhead:i.lastPlayhead,qoeDataDetails:i.qoe}},xdm:o})},trackPlay:function(){if(null===i)return n.warn("The Media Session was completed."),{};var e=s({eventType:dl.Play});return r({playerId:i.playerId,xdm:e})},trackPause:function(){if(null===i)return n.warn("The Media Session was completed."),{};var e=s({eventType:dl.Pause});return r({playerId:i.playerId,xdm:e})},trackSessionEnd:function(){if(null===i)return n.warn("The Media Session was completed."),{};var e=s({eventType:dl.SessionEnd});return r({playerId:i.playerId,xdm:e})},trackComplete:function(){if(null===i)return n.warn("The Media Session was completed."),{};var e=s({eventType:dl.SessionComplete});return r({playerId:i.playerId,xdm:e})},trackError:function(e){if(n.warn("trackError("+e+")"),null===i)return n.warn("The Media Session was completed."),{};var t={name:e,source:"player"},o=s({eventType:dl.Error,mediaDetails:{errorDetails:t}});return r({playerId:i.playerId,xdm:o})},trackEvent:function(e,t,o){if(ke(t))return n.warn("Invalid media object."),{};if(null===i)return n.warn("The Media Session was completed."),{};if(!u(Object.values(sl),e))return n.warn("Invalid event type"),{};var a=s({eventType:e,mediaDetails:t,contextData:o});return r({playerId:i.playerId,xdm:a})},updatePlayhead:function(e){null!==i?Ve(e)&&(i.lastPlayhead=parseInt(e,10)):n.warn("The Media Session was completed.")},updateQoEObject:function(e){null!==i?e&&(i.qoe=e):n.warn("The Media Session was completed.")},destroy:function(){n.warn("Destroy called, destroying the tracker."),i=null}}},wl=function(e){var n=e.eventManager,t=e.sendEdgeNetworkRequest,r=e.config,o=e.logger,i=e.consent,a=Qd(),c=Kd({sendEdgeNetworkRequest:t,config:r,consent:i,eventManager:n,setTimestamp:ls((function(){return new Date}))}),u=$d({mediaSessionCacheManager:a,mediaEventManager:c,config:r}),s=rl({config:r,mediaEventManager:c,mediaSessionCacheManager:a,legacy:!0}),d=ol({mediaSessionCacheManager:a,config:r,trackMediaEvent:u});return ml({mediaResponseHandler:d,trackMediaSession:s,trackMediaEvent:u,createMediaHelper:vl,createGetInstance:bl,logger:o,config:r})};wl.namespace="Legacy Media Analytics";var El=[hr,oo,Yo,Zo,rs,Ps,Bs,zs,Js,Gd,Vd,wl,il],Cl="https://adobe.ly/3sHh553",Il=function(e){var n=e.combinedConfigValidator,t=e.options,r=e.logger;try{return n.noUnknownFields().required().call({logger:r},t)}catch(e){throw new Error("Resolve these configuration problems:\n\t - "+e.message.split("\n").join("\n\t - ")+"\nFor configuration documentation see: "+Cl)}},kl=function(e,n,t){return t.reduce((function(t,r){var o=r.buildOnInstanceConfiguredExtraParams;return o&&v(t,o({config:e,logger:n})),t}),{})},Sl=function(e){var n=[],t={get enabled(){return e.enabled},flush:function(){n.forEach((function(n){var t=n.method,r=n.args;return e[t].apply(e,Vf(r))}))}};return Object.keys(e).filter((function(n){return"function"==typeof e[n]})).forEach((function(e){t[e]=function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];n.push({method:e,args:r})}})),t},Tl=function(e){var n=e.options,t=e.componentCreators,r=e.coreConfigValidators,o=e.createConfig,i=e.logger,a=e.setDebugEnabled,c=Sl(i),u=t.map((function(e){return e.configValidators})).filter((function(e){return e})).reduce((function(e,n){return e.concat(n)}),r),s=o(Il({combinedConfigValidator:u,options:n,logger:c}));a(s.debugEnabled,{fromConfig:!0}),c.flush();var d=kl(s,i,t);return i.logOnInstanceConfigured(Uf(Uf({},d),{},{config:s})),s},Dl=function(e){var n=e.componentCreators,t=e.lifecycle,r=e.componentRegistry,o=e.getImmediatelyAvailableTools;return n.forEach((function(e){var n,t=e.namespace,i=o(t);try{n=e(i)}catch(e){throw pn({error:e,message:"["+t+"] An error occurred during component creation."})}r.register(t,n)})),t.onComponentsRegistered({lifecycle:t}).then((function(){return r}))},Pl=function(e){return v({},e)},Ol="edge.adobedc.net",Rl="adobedc.demdex.net",Al="ee",Nl=function(){return At({debugEnabled:Tt().default(!1),defaultConsent:xt(Qt,Xt,Yt).default(Qt),datastreamId:Nt().unique().required(),edgeDomain:Nt().domain().default(Ol),edgeBasePath:Nt().nonEmpty().default(Al),orgId:Nt().unique().required(),onBeforeEventSend:Dt().default(Ye),edgeConfigOverrides:_t}).renamed("edgeConfigId",Nt().unique(),"datastreamId")},xl=function(e){var n=e.errorPrefix,t=e.logger;return function(e,r){var o=ln(e);if(o.code===Wt)return t.warn("The "+r+" could not fully complete. "+o.message),{};throw fn({error:o,message:n+" "+o.message}),o}},Ml=function(e){var n=e.fetch;return function(e,t){return n(e,{method:"POST",cache:"no-cache",credentials:"include",headers:{"Content-Type":"text/plain; charset=UTF-8"},referrerPolicy:"no-referrer-when-downgrade",body:t}).then((function(e){return e.text().then((function(n){return{statusCode:e.status,getHeader:function(n){return e.headers.get(n)},body:n}}))}))}},_l=function(e){var n=e.XMLHttpRequest;return function(e,t){return new Promise((function(r,o){var i=new n;i.onreadystatechange=function(){4===i.readyState&&(0===i.status?o(new Error("Request aborted.")):r({statusCode:i.status,getHeader:function(e){return i.getResponseHeader(e)},body:i.responseText}))},i.onloadstart=function(){i.responseType="text"},i.open("POST",e,!0),i.setRequestHeader("Content-Type","text/plain; charset=UTF-8"),i.withCredentials=!0,i.onerror=o,i.onabort=o,i.send(t)}))}},ql=function(e){var n=e.sendBeacon,t=e.sendFetchRequest,r=e.logger;return function(e,o){var i=new Blob([o],{type:"text/plain; charset=UTF-8"});return n(e,i)?Promise.resolve({statusCode:204,getHeader:function(){return null},body:""}):(r.info("Unable to use `sendBeacon`; falling back to `fetch`."),t(e,o))}},Ll=function(e){var n=e.getDebugEnabled,t=e.console,r=e.getMonitors,o=e.context,i="["+o.instanceName+"]";o.componentName&&(i+=" ["+o.componentName+"]");var a=function(e,n){var t=r();if(t.length>0){var i=v({},o,n);t.forEach((function(n){n[e]&&n[e](i)}))}},c=function(e){for(var r=arguments.length,o=new Array(r>1?r-1:0),c=1;c<r;c++)o[c-1]=arguments[c];a("onBeforeLog",{level:e,arguments:o}),n()&&t[e].apply(t,[i].concat(o))};return{get enabled(){return r().length>0||n()},logOnInstanceCreated:function(e){a("onInstanceCreated",e),c("info","Instance initialized.")},logOnInstanceConfigured:function(e){a("onInstanceConfigured",e),c("info","Instance configured. Computed configuration:",e.config)},logOnBeforeCommand:function(e){a("onBeforeCommand",e),c("info","Executing "+e.commandName+" command. Options:",e.options)},logOnCommandResolved:function(e){a("onCommandResolved",e),c("info",e.commandName+" command resolved. Result:",e.result)},logOnCommandRejected:function(e){a("onCommandRejected",e),c("error",e.commandName+" command was rejected. Error:",e.error)},logOnBeforeNetworkRequest:function(e){a("onBeforeNetworkRequest",e),c("info","Request "+e.requestId+": Sending request.",e.payload)},logOnNetworkResponse:function(e){a("onNetworkResponse",e);var n=e.parsedBody||e.body?"response body:":"no response body.";c("info","Request "+e.requestId+": Received response with status code "+e.statusCode+" and "+n,e.parsedBody||e.body)},logOnNetworkError:function(e){a("onNetworkError",e),c("error","Request "+e.requestId+": Network request failed.",e.error)},info:c.bind(null,"info"),warn:c.bind(null,"warn"),error:c.bind(null,"error")}},jl=["edgeConfigOverrides"],Ul="Event was canceled because the onBeforeEventSend callback returned false.",Fl=function(e){var n=e.config,t=e.logger,r=e.lifecycle,o=e.consent,i=e.createEvent,a=e.createDataCollectionRequestPayload,c=e.createDataCollectionRequest,u=e.sendEdgeNetworkRequest,s=e.applyResponse,d=n.onBeforeEventSend,l=n.edgeConfigOverrides;return{createEvent:i,sendEvent:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.edgeConfigOverrides,s=Ff(n,jl),f=Lo({payload:a(),localConfigOverrides:i,globalConfigOverrides:l}),p=c(f),g=S(),m=S();return r.onBeforeEvent(Uf(Uf({},s),{},{event:e,onResponse:g.add,onRequestFailure:m.add})).then((function(){return f.payload.addEvent(e),o.awaitConsent()})).then((function(){try{e.finalize(d)}catch(o){var n=function(){throw o};return m.add(r.onRequestFailure),m.call({error:o}).then(n,n)}if(!e.shouldSend()){m.add(r.onRequestFailure),t.info(Ul);var o=new Error(Ul);return m.call({error:o}).then((function(){}))}return u({request:p,runOnResponseCallbacks:g.call,runOnRequestFailureCallbacks:m.call})}))},applyResponse:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.renderDecisions,o=void 0!==t&&t,i=n.decisionContext,u=void 0===i?{}:i,d=n.responseHeaders,l=void 0===d?{}:d,f=n.responseBody,p=void 0===f?{handle:[]}:f,g=n.personalization,m=a(),v=c({payload:m}),h=S();return r.onBeforeEvent({event:e,renderDecisions:o,decisionContext:u,decisionScopes:[bi],personalization:g,onResponse:h.add,onRequestFailure:Ye}).then((function(){return m.addEvent(e),s({request:v,responseHeaders:l,responseBody:p,runOnResponseCallbacks:h.call})}))}}},Bl="state:store",Hl=function(e){var n=e.cookieJar,t=e.shouldTransferCookie,r=e.apexDomain,o=e.dateProvider;return{cookiesToPayload:function(e,o){var i=x(o,r),a={domain:r,cookiesEnabled:!0};if(!i){var c=n.get(),u=Object.keys(c).filter(t).map((function(e){return{key:e,value:c[e]}}));u.length&&(a.entries=u)}e.mergeState(a)},responseToCookies:function(e){e.getPayloadsByType(Bl).forEach((function(e){var t={domain:r},i=e.attrs&&e.attrs.SameSite&&e.attrs.SameSite.toLowerCase();void 0!==e.maxAge&&(t.expires=new Date(o().getTime()+1e3*e.maxAge)),void 0!==i&&(t.sameSite=i),"none"===i&&(t.secure=!0),n.set(e.key,e.value,t)}))}}},Vl="mboxEdgeCluster",zl="at_qa_mode",Gl="mbox",Jl=function(e){var n=e.orgId,t=e.targetMigrationEnabled;return function(e){return Ge(n,e)||e===zl||t&&e===Gl}},Ql="v1",Xl=function(e){var n=e.shift()||[],t=e.shift()||[],r=e;return b.apply(void 0,[{}].concat(Vf(n),Vf(t),Vf(r)))},Yl=function(e){return function(n){var t=function(){throw n};return e.call({error:n}).then(t,t)}},Kl=function(e){var n=e.config,t=e.lifecycle,r=e.cookieTransfer,o=e.sendNetworkRequest,i=e.createResponse,a=e.processWarningsAndErrors,c=e.getLocationHint,u=e.getAssuranceValidationTokenParams,s=n.edgeDomain,d=n.edgeBasePath,l=n.datastreamId;return function(e){var n=e.request,f=e.runOnResponseCallbacks,p=void 0===f?Ye:f,g=e.runOnRequestFailureCallbacks,m=void 0===g?Ye:g,v=S();v.add(t.onResponse),v.add(p);var h=S();return h.add(t.onRequestFailure),h.add(m),t.onBeforeRequest({request:n,onResponse:v.add,onRequestFailure:h.add}).then((function(){var e=n.getUseIdThirdPartyDomain()?Rl:s,t=c(),i=t?d+"/"+t+n.getEdgeSubPath():""+d+n.getEdgeSubPath(),a=n.getDatastreamIdOverride()||l,f=n.getPayload();a!==l&&f.mergeMeta({sdkConfig:{datastream:{original:l}}});var p="https://"+e+"/"+i+"/"+Ql+"/"+n.getAction()+"?configId="+a+"&requestId="+n.getId()+u();return r.cookiesToPayload(f,e),o({requestId:n.getId(),url:p,payload:f,useSendBeacon:n.getUseSendBeacon()})})).then((function(e){return a(e),e})).catch(Yl(h)).then((function(e){var n=e.parsedBody,t=e.getHeader,o=i({content:n,getHeader:t});return r.responseToCookies(o),v.call({response:o}).then(Xl)}))}},Wl=204,$l="The server responded with a",Zl=function(e){var n=e.logger;return function(e){var t=e.statusCode,r=e.body,o=e.parsedBody;if(t<200||t>=300||!o&&t!==Wl||o&&!Array.isArray(o.handle)){var i=o?JSON.stringify(o,null,2):r;throw new Error($l+" status code "+t+" and "+(i?"response body:\n"+i:"no response body."))}if(o){var a=o.warnings,c=void 0===a?[]:a,u=o.errors,s=void 0===u?[]:u;c.forEach((function(e){n.warn($l+" warning:",e)})),s.forEach((function(e){n.error($l+" non-fatal error:",e)}))}}},ef=function(e){var n=e.orgId,t=e.cookieJar,r=xe(n,Le),o=function(){return t.get(r)},i=function(){var e=t.get(Vl);if(e)return"t"+e};return function(){return o()||i()}},nf=3,tf=[429,503,502,504],rf=function(e){var n=e.response;return e.retriesAttempted<nf&&u(tf,n.statusCode)},of=1e3,af=1e3,cf=.3,uf=function(e){var n=of+e*af,t=n*cf,r=n-t,o=n+t;return Math.round(r+Math.random()*(o-r))},sf=function(e){var n,t=e.getHeader(ar);if(t){var r=parseInt(t,10);n=ze(r)?1e3*r:Math.max(0,new Date(t).getTime()-(new Date).getTime())}return n},df=function(e){var n=e.response,t=e.retriesAttempted,r=sf(n);return void 0===r&&(r=uf(t)),r},lf=200,ff=function(e){var n=e.cookieTransfer,t=e.lifecycle,r=e.createResponse,o=e.processWarningsAndErrors;return function(e){var i=e.request,a=e.responseHeaders,c=e.responseBody,u=e.runOnResponseCallbacks,s=void 0===u?Ye:u,d=e.runOnRequestFailureCallbacks,l=void 0===d?Ye:d,f=S();f.add(t.onResponse),f.add(s);var p=S();p.add(t.onRequestFailure),p.add(l);var g=function(e){return a[e]};return t.onBeforeRequest({request:i,onResponse:f.add,onRequestFailure:p.add}).then((function(){return o({statusCode:lf,getHeader:g,body:JSON.stringify(c),parsedBody:c})})).catch(Yl(p)).then((function(){var e=r({content:c,getHeader:g});return n.responseToCookies(e),f.call({response:e}).then(Xl)}))}},pf=Fe(window),gf=window,mf=gf.console,vf=gf.fetch,hf=gf.navigator,yf=gf.XMLHttpRequest,bf=function(){return window.__alloyMonitors||[]},wf=Nl(),Ef=Re(window,E),Cf=J(vf)?Ml({fetch:vf}):_l({XMLHttpRequest:yf}),If=Ie(),kf=Ho({window:window,createNamespacedStorage:pf}),Sf=function(e){var n=e.instanceName,t=e.logController,r=t.setDebugEnabled,o=t.logger,i=t.createComponentLogger,a=zt(),c=Ht(a),u=function(e){r(e.enabled,{fromConfig:!1})},s=T({logger:o,cookieJar:E}),d=function(e){var t=Tl({options:e,componentCreators:El,coreConfigValidators:wf,createConfig:Pl,logger:o,setDebugEnabled:r}),u=t.orgId,d=t.targetMigrationEnabled,l=Jl({orgId:u,targetMigrationEnabled:d}),f=Hl({cookieJar:s,shouldTransferCookie:l,apexDomain:Ef,dateProvider:function(){return new Date}}),p=J(hf.sendBeacon)?ql({sendBeacon:hf.sendBeacon.bind(hf),sendFetchRequest:Cf,logger:o}):Cf,g=Gt({logger:o,sendFetchRequest:Cf,sendBeaconRequest:p,isRequestRetryable:rf,getRequestRetryDelay:df}),m=Zl({logger:o}),v=Jt({logger:o}),h=ur({extractEdgeInfo:v}),y=ef({orgId:u,cookieJar:E}),b=Kl({config:t,lifecycle:c,cookieTransfer:f,sendNetworkRequest:g,createResponse:h,processWarningsAndErrors:m,getLocationHint:y,getAssuranceValidationTokenParams:kf}),w=ff({lifecycle:c,cookieTransfer:f,createResponse:h,processWarningsAndErrors:m}),C=tr({logger:o}),I=rr({generalConsentState:C,logger:o}),k=Fl({config:t,logger:o,lifecycle:c,consent:I,createEvent:ir,createDataCollectionRequestPayload:_o,createDataCollectionRequest:No,sendEdgeNetworkRequest:b,applyResponse:w});return Dl({componentCreators:El,lifecycle:c,componentRegistry:a,getImmediatelyAvailableTools:function(e){var r=i(e);return{config:t,componentRegistry:a,consent:I,eventManager:k,fireReferrerHideableImage:If,logger:r,lifecycle:c,sendEdgeNetworkRequest:b,handleError:xl({errorPrefix:"["+n+"] ["+e+"]",logger:r}),createNamespacedStorage:pf,apexDomain:Ef}}})},l=xl({errorPrefix:"["+n+"]",logger:o});return lr({logger:o,configureCommand:d,setDebugCommand:u,handleError:l,validateCommandOptions:pr})};(function(){var n=window.__alloyNS;n&&n.forEach((function(n){var t=jt({console:mf,locationSearch:window.location.search,createLogger:Ll,instanceName:n,createNamespacedStorage:pf,getMonitors:bf}),r=Sf({instanceName:n,logController:t}),o=e(r),i=window[n].q;i.push=o,t.logger.logOnInstanceCreated({instance:o}),i.forEach(o)}))})()}function Tf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Df(e){if(e.__esModule)return e;var n=e.default;if("function"==typeof n){var t=function e(){return this instanceof e?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};t.prototype=n.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(e).forEach((function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})})),t}
/*
    object-assign
    (c) Sindre Sorhus
    @license MIT
    */function Pf(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function Of(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var n={},t=0;t<10;t++)n["_"+String.fromCharCode(t)]=t;if("0123456789"!==Object.getOwnPropertyNames(n).map((function(e){return n[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}function Rf(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function Af(e){if(Array.isArray(e))return e}function Nf(e){if(Array.isArray(e))return Rf(e)}function xf(e,n,t){return(n=Gf(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Mf(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _f(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,i,a,c=[],u=!0,s=!1;try{if(i=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;u=!1}else for(;!(u=(r=i.call(t)).done)&&(c.push(r.value),c.length!==n);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}function qf(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Lf(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function jf(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Uf(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?jf(Object(t),!0).forEach((function(n){xf(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):jf(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Ff(e,n){if(null==e)return{};var t,r,o=Bf(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.includes(t)||{}.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function Bf(e,n){if(null==e)return{};var t={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(n.includes(r))continue;t[r]=e[r]}return t}function Hf(e,n){return Af(e)||_f(e,n)||Qf(e,n)||qf()}function Vf(e){return Nf(e)||Mf(e)||Qf(e)||Lf()}function zf(e,n){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}function Gf(e){var n=zf(e,"string");return"symbol"==typeof n?n:n+""}function Jf(e){return Jf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jf(e)}function Qf(e,n){if(e){if("string"==typeof e)return Rf(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Rf(e,n):void 0}}
/*! js-cookie v3.0.5 | MIT */
function Xf(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)e[r]=t[r]}return e}function Yf(e,n){function t(t,r,o){if("undefined"!=typeof document){"number"==typeof(o=Xf({},n,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var a in o)o[a]&&(i+="; "+a,!0!==o[a]&&(i+="="+o[a].split(";")[0]));return document.cookie=t+"="+e.write(r,t)+i}}function r(n){if("undefined"!=typeof document&&(!arguments.length||n)){for(var t=document.cookie?document.cookie.split("; "):[],r={},o=0;o<t.length;o++){var i=t[o].split("="),a=i.slice(1).join("=");try{var c=decodeURIComponent(i[0]);if(r[c]=e.read(a,c),n===c)break}catch(e){}}return n?r[n]:r}}return Object.create({set:t,get:r,remove:function(e,n){t(e,"",Xf({},n,{expires:-1}))},withAttributes:function(e){return Yf(this.converter,Xf({},this.attributes,e))},withConverter:function(e){return Yf(Xf({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(e)}})}function Kf(e,n){return Object.prototype.hasOwnProperty.call(e,n)}function Wf(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(hn[e[n+0]]+hn[e[n+1]]+hn[e[n+2]]+hn[e[n+3]]+"-"+hn[e[n+4]]+hn[e[n+5]]+"-"+hn[e[n+6]]+hn[e[n+7]]+"-"+hn[e[n+8]]+hn[e[n+9]]+"-"+hn[e[n+10]]+hn[e[n+11]]+hn[e[n+12]]+hn[e[n+13]]+hn[e[n+14]]+hn[e[n+15]]).toLowerCase()}function $f(){if(!cn&&!(cn="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return cn(bn)}function Zf(e,n,t){if(wn.randomUUID&&!n&&!e)return wn.randomUUID();var r=(e=e||{}).random||(e.rng||$f)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,n){t=t||0;for(var o=0;o<16;++o)n[t+o]=r[o];return n}return Wf(r)}function ep(e){var n=this.constructor;return this.then((function(t){return n.resolve(e()).then((function(){return t}))}),(function(t){return n.resolve(e()).then((function(){return n.reject(t)}))}))}function np(e){return Boolean(e&&void 0!==e.length)}function tp(){}function rp(e,n){return function(){e.apply(n,arguments)}}function op(e){if(!(this instanceof op))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],dp(e,this)}function ip(e,n){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,op._immediateFn((function(){var t=1===e._state?n.onFulfilled:n.onRejected;if(null!==t){var r;try{r=t(e._value)}catch(e){return void cp(n.promise,e)}ap(n.promise,r)}else(1===e._state?ap:cp)(n.promise,e._value)}))):e._deferreds.push(n)}function ap(e,n){try{if(n===e)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"===Jf(n)||"function"==typeof n)){var t=n.then;if(n instanceof op)return e._state=3,e._value=n,void up(e);if("function"==typeof t)return void dp(rp(t,n),e)}e._state=1,e._value=n,up(e)}catch(n){cp(e,n)}}function cp(e,n){e._state=2,e._value=n,up(e)}function up(e){2===e._state&&0===e._deferreds.length&&op._immediateFn((function(){e._handled||op._unhandledRejectionFn(e._value)}));for(var n=0,t=e._deferreds.length;n<t;n++)ip(e,e._deferreds[n]);e._deferreds=null}function sp(e,n,t){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof n?n:null,this.promise=t}function dp(e,n){var t=!1;try{e((function(e){t||(t=!0,ap(n,e))}),(function(e){t||(t=!0,cp(n,e))}))}catch(e){if(t)return;t=!0,cp(n,e)}}function lp(e){return"object"===Jf(e)||void 0===e}function fp(){return{matches:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(lp(e[n]))return!1;for(var r=String(e[n]).toLowerCase(),o=0;o<t.length;o+=1)if(!lp(t[o])&&r===String(t[o]).toLowerCase())return!0;return!1}}}function pp(){return{matches:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(lp(e[n]))return!1;for(var r=String(e[n]).toLowerCase(),o=0;o<t.length;o+=1)if(!lp(t[o])&&r===String(t[o]).toLowerCase())return!1;return!0}}}function gp(){return{matches:function(e,n){return void 0!==e[n]&&null!==e[n]}}}function mp(){return{matches:function(e,n){return void 0===e[n]||null===e[n]}}}function vp(e){return"number"==typeof e}function hp(){return{matches:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=e[n];if(!vp(r))return!1;for(var o=0;o<t.length;o+=1)if(vp(t[o])&&r>t[o])return!0;return!1}}}function yp(){return{matches:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=e[n];if(!vp(r))return!1;for(var o=0;o<t.length;o+=1)if(vp(t[o])&&r>=t[o])return!0;return!1}}}function bp(){return{matches:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=e[n];if(!vp(r))return!1;for(var o=0;o<t.length;o+=1)if(vp(t[o])&&r<t[o])return!0;return!1}}}function wp(){return{matches:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=e[n];if(!vp(r))return!1;for(var o=0;o<t.length;o+=1)if(vp(t[o])&&r<=t[o])return!0;return!1}}}function Ep(){return{matches:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(lp(e[n]))return!1;for(var r=String(e[n]).toLowerCase(),o=0;o<t.length;o+=1)if(!lp(t[o])&&-1!==r.indexOf(String(t[o]).toLowerCase()))return!0;return!1}}}function Cp(){return{matches:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(lp(e[n]))return!1;for(var r=String(e[n]).toLowerCase(),o=0;o<t.length;o+=1)if(!lp(t[o])&&-1!==r.indexOf(String(t[o]).toLowerCase()))return!1;return!0}}}function Ip(){return{matches:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(lp(e[n]))return!1;for(var r=String(e[n]).toLowerCase(),o=0;o<t.length;o+=1)if(!lp(t[o])&&r.startsWith(String(t[o]).toLowerCase()))return!0;return!1}}}function kp(){return{matches:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(lp(e[n]))return!1;for(var r=String(e[n]).toLowerCase(),o=0;o<t.length;o+=1)if(!lp(t[o])&&r.endsWith(t[o].toLowerCase()))return!0;return!1}}}function Sp(e){return rd[e]}function Tp(e){return void 0===e}function Dp(e,n,t){switch(n){case ed.GREATER_THAN:return e>t;case ed.GREATER_THAN_OR_EQUAL_TO:return e>=t;case ed.LESS_THAN:return e<t;case ed.LESS_THAN_OR_EQUAL_TO:return e<=t;case ed.EQUALS:return e===t;case ed.NOT_EQUALS:return e!==t;default:return!1}}function Pp(e,n){for(var t=0;t<n.length;t+=1)if(!Tp(e[n[t]]))return e[n[t]]}function Op(e,n){for(var t=Object.keys(e),r=0;r<t.length;r+=1){var o=t[r],i=n.event;if((void 0===i?{}:i)[t[r]]!==e[o])return!1}return!0}function Rp(e,n,t,r){return e.reduce((function(e,o){var i=Pp(o,od);if(!i)return e;var a=n.events[i];if(!a)return e;var c=Pp(o,id);if(!c)return e;var u=a[c];if(!u)return e;if(!Op(o,u))return e;var s=u.count,d=void 0===s?1:s;return Tp(t)||Tp(r)||u.timestamp>=t&&u.timestamp<=r?e+d:e}),0)}function Ap(e,n,t,r){var o=t;return e.every((function(e){var t=Pp(e,od);if(!t)return!1;var i=n.events[t];if(!i)return!1;var a=Pp(e,id);if(!a)return!1;var c=i[a];if(!Op(e,c))return!1;if(null===c||Tp(c)||0===c.count)return!1;var u=(Tp(o)||c.timestamp>=o)&&(Tp(r)||c.timestamp<=r);return o=c.timestamp,u}))?1:0}function Np(e,n){for(var t=!0,r=0;r<n.length;r+=1)t=t&&n[r].evaluate(e);return t}function xp(e,n){for(var t=!1,r=0;r<n.length;r+=1)if(t=t||n[r].evaluate(e))return!0;return!1}function Mp(e,n){return{version:e,rules:n}}function _p(e,n){return{execute:function(t){return e.evaluate(t)?n:[]},toString:function(){return"Rule{condition="+e+", consequences="+n+"}"}}}function qp(e,n){return{evaluate:function(e){return n.evaluate(e)},toString:function(){return"Condition{type="+e+", definition="+n+"}"}}}function Lp(e,n,t){return{id:e,type:n,detail:t}}function jp(e,n){return{evaluate:function(t){return nd.AND===e?Np(t,n):nd.OR===e&&xp(t,n)}}}function Up(e,n,t){return{evaluate:function(r){var o=Sp(n);return!!o&&o.matches(r,e,t)}}}function Fp(e,n,t,r,o,i){return{evaluate:function(a){return Dp(td.ORDERED===i?Ap(e,a,r,o):Rp(e,a,r,o),n,t)}}}function Bp(e){return Up(e.key,e.matcher,e.values)}function Hp(e){return jp(e.logic,e.conditions.map(zp))}function Vp(e){var n=e.events,t=e.from,r=e.to;return Fp(n,e.matcher,e.value,t,r,e.searchType)}function zp(e){var n=e.type,t=e.definition;if(Zs.MATCHER===n)return qp(n,Bp(t));if(Zs.GROUP===n)return qp(n,Hp(t));if(Zs.HISTORICAL===n)return qp(n,Vp(t));throw new Error("Can not parse condition")}function Gp(e){return Lp(e.id,e.type,e.detail)}function Jp(e){var n=e.condition,t=e.consequences;return _p(zp(n),t.map(Gp))}function Qp(e){return Mp(e.version,e.rules.map(Jp))}function Xp(e){var n=Qp(e),t=n.version,r=n.rules;return{execute:function(e){return r.map((function(n){return n.execute(e)})).filter((function(e){return e.length>0}))},getVersion:function(){return t},numRules:function(){return r.length}}}}function D(e){throw Error(e)}function P(e,t){var r=n.createElement("script"),o=!1;r.src=e,r.async=!0,t&&(r.onload=r.onreadystatechange=function(e){var n=this.readyState;o||n&&"complete"!==n&&"loaded"!==n||(o=!0,t(e))}),a?a.appendChild(r):n.body?n.body.appendChild(r):D("no script parent")}function O(){var n,t,r,o,i,a,u,s=[];n=function(n){o?n(e._satellite):s.push(n)},t=new m((function(e){n(e)})),e.__satelliteLoadedCallback=n,e.__satelliteLoadedPromise=t,r=function(){var n,t,r;for(o=!0,n=0,t=s.length;n<t;n++){r=s[n];try{r(e._satellite)}catch(e){}}},c&&(i=c.adobe)&&(a=i.launch)&&(u=a.url)&&P(u,r)}function R(){var n=[];e._satellite=e._satellite||{},e._satellite.track=function(e,t){(t=t||{})._beforeSatelliteLoaded=!0,n.push([e,t])},e.__satelliteLoadedCallback((function(){var t,r,o;for(t=0,r=n.length;t<r;t++)o=n[t],e._satellite.track(o[0],o[1])})),_satellite.track("pageView")}function A(){var n={_set:function(n,t){0!==n.indexOf("digitalData")&&(n="digitalData."+n),"object"!=typeof t&&"function"!=typeof t||!t.then||"function"!=typeof t.then||(t=t.unresolved||void 0),p(e.alloy_all,"data._adobe_corpnew."+n,t)}};e.digitalData=e.digitalData||n}-1===e.location.search.indexOf("marketingtech=off")&&(i(),d(),y(),S(),T(),O(),R(),A()),e.alloy_all&&e.alloy_all.set("data.marketingtech.bootstrap.version","0.27.0")}();
